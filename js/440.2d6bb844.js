"use strict";(self["webpackChunkaiArt"]=self["webpackChunkaiArt"]||[]).push([[440],{5240:function(e,t,s){s.d(t,{A:function(){return w}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-layout"},[t("header-nav"),t("div",{staticClass:"content-container"},[e._t("default")],2),t("footer-bar")],1)},a=[],n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header-nav"},[e._m(0),t("div",{staticClass:"nav-menu"},[t("el-menu",{staticClass:"nav-list",attrs:{mode:"horizontal",router:!0,"default-active":e.activeIndex}},[t("el-menu-item",{attrs:{index:"/home"}},[e._v("首页")]),t("el-menu-item",{attrs:{index:"/create"}},[e._v("AI绘画创作")]),t("el-menu-item",{attrs:{index:"/paintings"}},[e._v("画作展示")]),t("el-menu-item",{attrs:{index:"/about"}},[e._v("关于我们")]),t("el-menu-item",{attrs:{index:"/contact"}},[e._v("联系我们")])],1)],1),t("div",{staticClass:"user-actions"},[e.isLoggedIn?t("div",{staticClass:"credits-info"},[t("i",{staticClass:"el-icon-coin"}),t("span",{staticClass:"credits-text"},[e._v(e._s(e.userCredits)+" 积分")]),t("el-button",{staticClass:"get-more-btn",attrs:{type:"text"}},[e._v("获取更多")])],1):e._e(),e.isLoggedIn?t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[t("span",{staticClass:"user-info"},[t("el-avatar",{attrs:{size:"medium",icon:"el-icon-user"}}),t("span",{staticClass:"username"},[e._v(e._s(e._f("formatPhone")(e.userPhone)))])],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"profile"}},[e._v("个人中心")]),t("el-dropdown-item",{attrs:{command:"works"}},[e._v("我的作品")]),t("el-dropdown-item",{attrs:{command:"vip"}},[e._v("开通VIP")]),t("el-dropdown-item",{attrs:{divided:"",command:"logout"}},[e._v("退出登录")])],1)],1):t("div",[t("el-button",{attrs:{type:"text"},on:{click:e.goToLogin}},[e._v("登录")]),e._v(" / "),t("el-button",{attrs:{type:"text"},on:{click:e.goToRegister}},[e._v("注册")])],1)],1)])},l=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo-container"},[t("div",{staticClass:"logo"},[e._v("绘画艺术")]),t("div",{staticClass:"slogan"},[e._v("AI作画 · 灵感创作")])])}],o=(s(4114),{name:"HeaderNav",data(){return{activeIndex:this.$route.path,userCredits:100}},computed:{isLoggedIn(){return"true"===sessionStorage.getItem("isAuthenticated")},userPhone(){return sessionStorage.getItem("userPhone")||""}},filters:{formatPhone(e){return e?e.substring(0,3)+"****"+e.substring(7):""}},methods:{handleCommand(e){"profile"===e?this.$router.push("/user"):"logout"===e?this.logout():"works"===e?this.$router.push("/paintings"):"vip"===e&&this.$message.info("VIP开通功能开发中")},logout(){sessionStorage.removeItem("isAuthenticated"),sessionStorage.removeItem("userPhone"),this.$message.success("已退出登录"),this.$router.push("/login")},goToLogin(){this.$router.push("/login")},goToRegister(){this.$router.push("/register")}},watch:{"$route.path"(e){this.activeIndex=e}}}),r=o,c=s(1656),p=(0,c.A)(r,n,l,!1,null,"46f3da8c",null),u=p.exports,d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"footer-bar"},[t("div",{staticClass:"footer-content"},[e._m(0),e._m(1),t("div",{staticClass:"footer-section"},[t("h3",[e._v("快速链接")]),t("ul",[t("li",[t("router-link",{attrs:{to:"/home"}},[e._v("首页")])],1),t("li",[t("router-link",{attrs:{to:"/paintings"}},[e._v("画作展示")])],1),t("li",[t("router-link",{attrs:{to:"/about"}},[e._v("关于我们")])],1),t("li",[t("router-link",{attrs:{to:"/contact"}},[e._v("联系我们")])],1)])])]),e._m(2)])},g=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"footer-section"},[t("h3",[e._v("关于我们")]),t("p",[e._v("我们是一家专业的AI绘画艺术平台，致力于用先进的AI技术创造精美的艺术作品。")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"footer-section"},[t("h3",[e._v("联系方式")]),t("p",[e._v("电话：123-456-7890")]),t("p",[e._v("邮箱：contact@aiart.com")]),t("p",[e._v("地址：中国上海市浦东新区未来路100号")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"footer-bottom"},[t("p",[e._v("© 2023 AI绘画艺术平台 版权所有")])])}],h={name:"FooterBar"},m=h,v=(0,c.A)(m,d,g,!1,null,"0a93d14a",null),b=v.exports,f={name:"MainLayout",components:{HeaderNav:u,FooterBar:b}},C=f,_=(0,c.A)(C,i,a,!1,null,"23d03772",null),w=_.exports},5440:function(e,t,s){s.r(t),s.d(t,{default:function(){return Ee}});var i=function(){var e=this,t=e._self._c;return t("main-layout",[t("div",{staticClass:"create-painting-view"},[t("div",{staticClass:"view-header"},[t("h1",{staticClass:"view-title"},[e._v("AI绘画创作")]),t("div",{staticClass:"user-info"},[e.isLoggedIn?t("div",{staticClass:"user-credits"},[t("span",[e._v("积分: "),t("b",[e._v(e._s(e.userCredits))])]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.openBuyCredits}},[e._v("购买积分")])],1):e._e(),e.isLoggedIn?t("div",{staticClass:"user-vip-status"},[e.isVip?[t("el-tag",{attrs:{type:"warning",effect:"dark",size:"medium"}},[e._v("VIP会员")]),t("span",{staticClass:"vip-expires"},[e._v(e._s(e.vipExpiresText))])]:t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.openVipOptions}},[e._v("开通VIP")])],2):e._e()])]),t("div",{staticClass:"tabs-container"},[t("el-tabs",{staticClass:"painting-tabs",on:{"tab-click":e.handleTabChange},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"文生图",name:"text2img"}},[t("text-to-image-tab",{ref:"text2imgTab"})],1),t("el-tab-pane",{attrs:{label:"图生图",name:"img2img"}},[t("image-to-image-tab",{ref:"img2imgTab"})],1),t("el-tab-pane",{attrs:{label:"我的图库",name:"gallery"}},[t("gallery-tab",{ref:"galleryTab",on:{changeTab:e.changeTab}})],1),t("el-tab-pane",{attrs:{label:"后期处理",name:"postprocess"}},[t("post-processing-tab",{ref:"postprocessingTab"})],1),t("el-tab-pane",{attrs:{label:"超清放大 (Tiled diffusion)",name:"upscale"}},[t("upscale-tab")],1),t("el-tab-pane",{attrs:{label:"Inpaint Anything",name:"inpaint"}},[t("inpaint-tab")],1),t("el-tab-pane",{attrs:{label:"PNG图片信息",name:"info"}},[t("image-info-tab")],1),t("el-tab-pane",{attrs:{label:"WD1.4 标签器",name:"tagger"}},[t("tagger-tab")],1)],1)],1),e.showFeatureTip?t("div",{staticClass:"feature-tip"},[t("i",{staticClass:"el-icon-info-circle"}),t("span",[e._v("升级到VIP会员可使用更高分辨率和批量生成功能")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.openVipOptions}},[e._v("了解详情")]),t("i",{staticClass:"el-icon-close close-tip",on:{click:e.closeFeatureTip}})],1):e._e(),t("el-dialog",{attrs:{title:"购买积分",visible:e.creditsDialog.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.creditsDialog,"visible",t)}}},[t("div",{staticClass:"credit-packages"},e._l(e.creditPackages,(function(s,i){return t("div",{key:i,staticClass:"credit-package",class:{selected:e.creditsDialog.selectedPackage&&e.creditsDialog.selectedPackage.id===s.id},on:{click:function(t){return e.selectCreditPackage(s)}}},[t("div",{staticClass:"package-credits"},[e._v(e._s(s.amount)+"积分")]),t("div",{staticClass:"package-price"},[e._v("¥"+e._s(s.price))]),s.bonus?t("div",{staticClass:"package-info"},[t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("赠送"+e._s(s.bonus)+"积分")])],1):e._e()])})),0),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.creditsDialog.visible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",disabled:!e.creditsDialog.selectedPackage},on:{click:e.confirmCreditPurchase}},[e._v(" 确认购买 ")])],1)])],1)])},a=[],n=(s(4114),s(5240)),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-to-image-tab"},[t("div",{staticClass:"tab-content"},[t("div",{staticClass:"control-panel"},[t("div",{staticClass:"prompts-section"},[t("prompt-input",{attrs:{label:"提示词 Prompt",placeholder:"请输入正向提示词描述你想要的图像内容",rows:5,maxlength:1e3,"show-tips":!0,"tip-content":"提示：使用详细和具体的描述，提及风格、光线、视角和场景会得到更好的结果"},on:{translate:function(t){return e.updatePrompt("positive")},"show-history":e.showPromptHistory,"show-library":e.showPromptLibrary},model:{value:e.prompts.positive,callback:function(t){e.$set(e.prompts,"positive",t)},expression:"prompts.positive"}}),t("prompt-input",{attrs:{label:"负向提示词 Negative Prompt",placeholder:"请输入负向提示词描述你不想在图像中出现的元素",rows:3,maxlength:500,"show-tips":!1},on:{translate:function(t){return e.updatePrompt("negative")},"show-history":e.showNegativeHistory,"show-library":e.showNegativeLibrary},model:{value:e.prompts.negative,callback:function(t){e.$set(e.prompts,"negative",t)},expression:"prompts.negative"}})],1),t("div",{staticClass:"settings-section"},[t("div",{staticClass:"model-selection"},[t("div",{staticClass:"model-header-row"},[t("div",{staticClass:"checkpoint-selector"},[t("span",{staticClass:"model-label"},[e._v("CHECKPOINT")]),t("div",{staticClass:"selector-container"},[t("el-select",{staticClass:"model-select",attrs:{placeholder:"选择基础模型"},model:{value:e.settings.model,callback:function(t){e.$set(e.settings,"model",t)},expression:"settings.model"}},e._l(e.modelOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-button",{staticClass:"refresh-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.refreshModels}})],1)]),t("div",{staticClass:"vae-selector"},[t("span",{staticClass:"model-label"},[e._v("VAE")]),t("div",{staticClass:"selector-container"},[t("el-select",{staticClass:"model-select",attrs:{placeholder:"自动配置"},model:{value:e.vaeModel,callback:function(t){e.vaeModel=t},expression:"vaeModel"}},e._l(e.vaeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-button",{staticClass:"refresh-btn",attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",circle:""},on:{click:e.refreshVae}})],1)])]),t("div",{staticClass:"clip-skip"},[t("div",{staticClass:"clip-header"},[t("span",{staticClass:"model-label"},[e._v("CLIP跳过层Clip Skip")]),t("el-tooltip",{attrs:{content:"控制CLIP模型内部使用第几层作为文本特征",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",{staticClass:"clip-controls"},[t("el-input-number",{staticClass:"clip-input",attrs:{min:1,max:12,step:1,size:"small"},model:{value:e.settings.advancedSettings.clipSkip,callback:function(t){e.$set(e.settings.advancedSettings,"clipSkip",t)},expression:"settings.advancedSettings.clipSkip"}}),t("el-switch",{staticClass:"clip-switch",model:{value:e.settings.useClipSkip,callback:function(t){e.$set(e.settings,"useClipSkip",t)},expression:"settings.useClipSkip"}})],1)])]),t("div",{staticClass:"image-settings"},[t("image-settings",{attrs:{"initial-width":512,"initial-height":512,"initial-sampler":e.sampler,"initial-steps":e.steps,"initial-cfg-scale":e.cfgScale,"initial-seed":e.seed,"initial-batch-size":e.batchSize,"sampler-options":e.samplerOptions},on:{"update:width":function(t){e.width=t},"update:height":function(t){e.height=t},"update:sampler":function(t){e.sampler=t},"update:steps":function(t){e.steps=t},"update:cfgScale":function(t){e.cfgScale=t},"update:seed":function(t){e.seed=t},"update:batchSize":function(t){e.batchSize=t},change:e.updateTokenUsage},model:{value:e.settings.imageSettings,callback:function(t){e.$set(e.settings,"imageSettings",t)},expression:"settings.imageSettings"}})],1),t("div",{staticClass:"upscale-settings"},[t("div",{staticClass:"section-header"},[t("h3",[e._v("超分辨率设置")]),t("el-switch",{on:{change:e.updateTokenUsage},model:{value:e.settings.useUpscale,callback:function(t){e.$set(e.settings,"useUpscale",t)},expression:"settings.useUpscale"}})],1),e.settings.useUpscale?t("div",{staticClass:"section-content"},[t("div",{staticClass:"setting-row"},[t("div",{staticClass:"setting-label"},[e._v("超分倍数")]),t("div",{staticClass:"setting-control"},[t("el-select",{attrs:{placeholder:"选择倍数"},on:{change:e.updateTokenUsage},model:{value:e.settings.upscaleScale,callback:function(t){e.$set(e.settings,"upscaleScale",t)},expression:"settings.upscaleScale"}},[t("el-option",{attrs:{label:"1.5x",value:1.5}}),t("el-option",{attrs:{label:"2x",value:2}}),t("el-option",{attrs:{label:"3x",value:3}}),t("el-option",{attrs:{label:"4x",value:4}})],1)],1)]),t("div",{staticClass:"setting-row"},[t("div",{staticClass:"setting-label"},[e._v("超分算法")]),t("div",{staticClass:"setting-control"},[t("el-select",{attrs:{placeholder:"选择算法"},model:{value:e.settings.upscaleModel,callback:function(t){e.$set(e.settings,"upscaleModel",t)},expression:"settings.upscaleModel"}},e._l(e.upscalerOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),t("div",{staticClass:"setting-row"},[t("div",{staticClass:"setting-label"},[e._v("面部修复")]),t("div",{staticClass:"setting-control"},[t("el-switch",{on:{change:e.updateTokenUsage},model:{value:e.settings.faceRestoration,callback:function(t){e.$set(e.settings,"faceRestoration",t)},expression:"settings.faceRestoration"}})],1)]),e.isVipUser?e._e():t("div",{staticClass:"vip-feature-badge"},[t("el-tag",{attrs:{type:"warning"}},[e._v("VIP功能")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.openVipOptions}},[e._v("立即开通")])],1)]):e._e()]),e.showAdvancedSettings?t("div",{staticClass:"advanced-settings"},[t("advanced-settings",{on:{change:e.updateTokenUsage},model:{value:e.settings.advancedSettings,callback:function(t){e.$set(e.settings,"advancedSettings",t)},expression:"settings.advancedSettings"}})],1):e._e(),t("div",{staticClass:"advanced-toggle"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.showAdvancedSettings=!e.showAdvancedSettings}}},[e._v(" "+e._s(e.showAdvancedSettings?"收起高级设置":"展开高级设置")+" "),t("i",{class:e.showAdvancedSettings?"el-icon-arrow-up":"el-icon-arrow-down"})])],1)]),t("div",{staticClass:"generate-button-section"},[t("div",{staticClass:"token-info"},[t("div",{staticClass:"token-count"},[t("span",[e._v("预计消耗积分: "),t("b",[e._v(e._s(e.totalTokens))])]),t("el-tooltip",{attrs:{content:"积分消耗根据图像分辨率、步数和批次计算",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",{staticClass:"user-tokens"},[t("span",[e._v("可用积分: "),t("b",[e._v(e._s(e.userTokens))])]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.openBuyTokens}},[e._v("购买积分")])],1)]),t("generate-button",{attrs:{"token-cost":e.totalTokens,"token-balance":e.userTokens,"is-generating":e.isGenerating,"generation-progress":e.generationProgress,"can-generate":e.canGenerate&&!(e.settings.useUpscale&&!e.isVipUser),"progress-text":e.progressText||"生成中...","show-stop-button":!0,"is-vip-user":e.isVipUser},on:{generate:e.generateImage,stop:e.stopGeneration,recharge:e.openBuyTokens,"open-vip":e.openVipOptions}}),e.isVipUser?e._e():t("div",{staticClass:"generation-limits"},[t("p",[e._v("免费用户每天限制生成 "+e._s(e.freeUserDailyLimit)+" 张图片 "),t("el-button",{attrs:{type:"text"},on:{click:e.openVipOptions}},[e._v("升级会员解锁更多")])],1)])],1)]),t("div",{staticClass:"image-preview-panel"},[t("div",{staticClass:"preview-header"},[t("h3",{staticClass:"preview-title"},[e._v("生成预览")]),e.generatedImages.length>0?t("div",{staticClass:"preview-actions"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download"},on:{click:e.saveAllImages}},[e._v("保存所有")]),t("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.clearResults}},[e._v("清除结果")])],1):e._e()]),e.generatedImages.length>0?t("div",{staticClass:"preview-content"},[t("div",{staticClass:"image-grid"},e._l(e.generatedImages,(function(s,i){return t("div",{key:i,staticClass:"image-item"},[t("div",{staticClass:"image-container"},[t("img",{staticClass:"generated-image",attrs:{src:s.url,alt:"生成的图片"}})]),t("div",{staticClass:"image-actions"},[t("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(t){return e.previewImage(s)}}},[e._v("查看")]),t("el-button",{attrs:{type:"text",icon:"el-icon-download"},on:{click:function(t){return e.downloadImage(s)}}},[e._v("下载")]),t("el-button",{attrs:{type:"text",icon:"el-icon-star-off"},on:{click:function(t){return e.favoriteImage(s)}}},[e._v("收藏")])],1)])})),0)]):t("div",{staticClass:"empty-preview"},[e._m(0)]),e.isGenerating?t("div",{staticClass:"generation-progress"},[t("el-progress",{attrs:{percentage:e.generationProgress,format:e.progressFormat}}),t("p",[e._v("正在生成图像，请稍等...")])],1):e._e()])]),t("el-dialog",{staticClass:"preview-dialog",attrs:{visible:e.previewDialog,width:"70%"},on:{"update:visible":function(t){e.previewDialog=t}}},[t("div",{staticClass:"preview-dialog-content"},[t("div",{staticClass:"preview-dialog-image"},[e.currentPreviewImage?t("img",{attrs:{src:e.currentPreviewImage.url,alt:"预览图片"}}):e._e()]),t("div",{staticClass:"preview-dialog-info"},[t("h3",[e._v("图像信息")]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("提示词：")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.currentPreviewImage?e.currentPreviewImage.prompt||e.prompts.positive:""))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("负向提示词：")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.currentPreviewImage?e.currentPreviewImage.negativePrompt||e.prompts.negative:""))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("种子：")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.currentPreviewImage?e.currentPreviewImage.settings?.imageSettings?.seed||e.seed:""))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("尺寸：")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.currentPreviewImage?`${e.currentPreviewImage.width}x${e.currentPreviewImage.height}`:""))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("采样器：")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.currentPreviewImage?e.currentPreviewImage.settings?.imageSettings?.sampler||e.sampler:""))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("采样步数：")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.currentPreviewImage?e.currentPreviewImage.settings?.imageSettings?.steps||e.steps:""))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("CFG Scale：")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.currentPreviewImage?e.currentPreviewImage.settings?.imageSettings?.cfgScale||e.cfgScale:""))])])])])]),t("el-dialog",{attrs:{title:"开通VIP会员",visible:e.vipDialog.visible,width:"50%"},on:{"update:visible":function(t){return e.$set(e.vipDialog,"visible",t)}}},[t("div",{staticClass:"vip-plans"},e._l(e.vipPlans,(function(s,i){return t("div",{key:i,staticClass:"vip-plan",class:{selected:e.vipDialog.selectedPlan&&e.vipDialog.selectedPlan.id===s.id},on:{click:function(t){return e.selectVipPlan(s)}}},[t("div",{staticClass:"plan-header"},[t("h3",[e._v(e._s(s.name))]),t("div",{staticClass:"plan-price"},[t("span",{staticClass:"price"},[e._v("¥"+e._s(s.price))]),t("span",{staticClass:"period"},[e._v("/"+e._s(s.period))])])]),t("div",{staticClass:"plan-features"},e._l(s.features,(function(s,i){return t("div",{key:i,staticClass:"feature-item"},[t("i",{staticClass:"el-icon-check"}),t("span",[e._v(e._s(s))])])})),0),t("el-button",{attrs:{type:e.vipDialog.selectedPlan&&e.vipDialog.selectedPlan.id===s.id?"primary":"default"},on:{click:function(t){return t.stopPropagation(),e.confirmVipPurchase(s)}}},[e._v(e._s(e.vipDialog.selectedPlan&&e.vipDialog.selectedPlan.id===s.id?"确认选择":"选择此套餐"))])],1)})),0),t("div",{staticClass:"vip-benefits"},[t("h4",[e._v("VIP会员特权")]),t("ul",[t("li",[t("i",{staticClass:"el-icon-star-on"}),e._v(" 每天可生成更多图像 (最多100张/天)")]),t("li",[t("i",{staticClass:"el-icon-lightning"}),e._v(" 优先队列，无需排队等待")]),t("li",[t("i",{staticClass:"el-icon-picture"}),e._v(" 超高分辨率图像生成 (最大2048x2048)")]),t("li",[t("i",{staticClass:"el-icon-magic-stick"}),e._v(" 高级AI超分辨率和面部修复")]),t("li",[t("i",{staticClass:"el-icon-download"}),e._v(" 无限下载生成历史和批量导出")])])])]),t("el-dialog",{attrs:{title:"购买积分",visible:e.tokensDialog.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.tokensDialog,"visible",t)}}},[t("div",{staticClass:"token-packages"},e._l(e.tokenPackages,(function(s,i){return t("div",{key:i,staticClass:"token-package",class:{selected:e.tokensDialog.selectedPackage&&e.tokensDialog.selectedPackage.id===s.id},on:{click:function(t){return e.selectTokenPackage(s)}}},[t("div",{staticClass:"package-tokens"},[e._v(e._s(s.amount)+"积分")]),t("div",{staticClass:"package-price"},[e._v("¥"+e._s(s.price))]),s.bonus?t("div",{staticClass:"package-info"},[t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("赠送"+e._s(s.bonus)+"积分")])],1):e._e()])})),0),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.tokensDialog.visible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",disabled:!e.tokensDialog.selectedPackage},on:{click:e.confirmTokenPurchase}},[e._v(" 确认购买 ")])],1)])],1)},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"empty-placeholder"},[t("i",{staticClass:"el-icon-picture-outline"}),t("p",[e._v('请在左侧配置参数并点击"开始生成"按钮')])])}],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"prompt-input"},[t("div",{staticClass:"prompt-header"},[t("span",{staticClass:"label"},[e._v(e._s(e.label))]),e.tooltip?t("el-tooltip",{attrs:{content:e.tooltip,placement:"top"}},[t("i",{staticClass:"el-icon-question"})]):e._e(),e.showTranslate?t("div",{staticClass:"translate-link"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.translatePrompt}},[t("i",{staticClass:"el-icon-refresh"}),e._v(" 翻译为英文 ")])],1):e._e()],1),t("el-input",{attrs:{type:"textarea",placeholder:e.placeholder,rows:e.rows,maxlength:e.maxlength,"show-word-limit":e.showWordLimit},on:{input:e.handleInput},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e.showTips?t("div",{staticClass:"prompt-tips"},[t("p",[e._v(e._s(e.tipContent))])]):e._e(),e.showActions?t("div",{staticClass:"prompt-actions"},[t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:e.clearPrompt}},[e._v("清空")]),e.showFromHistory?t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-time"},on:{click:e.showHistory}},[e._v("历史记录")]):e._e(),e.showFromLibrary?t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-collection"},on:{click:e.showLibrary}},[e._v("从词库选择")]):e._e()],1):e._e()],1)},c=[],p={name:"PromptInput",props:{value:{type:String,default:""},label:{type:String,default:"提示词"},placeholder:{type:String,default:"请输入提示词"},tooltip:{type:String,default:""},rows:{type:Number,default:5},maxlength:{type:Number,default:1e3},showWordLimit:{type:Boolean,default:!0},showTips:{type:Boolean,default:!0},tipContent:{type:String,default:"提示：使用详细和具体的描述，提及风格、光线、视角和场景会得到更好的结果"},showActions:{type:Boolean,default:!0},showFromHistory:{type:Boolean,default:!0},showFromLibrary:{type:Boolean,default:!0},showTranslate:{type:Boolean,default:!0}},computed:{inputValue:{get(){return this.value},set(e){this.$emit("input",e)}}},methods:{handleInput(e){this.$emit("input",e)},clearPrompt(){this.inputValue="",this.$emit("clear")},showHistory(){this.$emit("show-history")},showLibrary(){this.$emit("show-library")},translatePrompt(){if(!this.inputValue.trim())return void this.$message.warning("请先输入提示词");const e=e=>{const t=/[\u4e00-\u9fa5]/.test(e);return t?(this.$message.success("已翻译为英文"),e+" (Translated to English)"):(this.$message.success("已翻译为中文"),e+" (翻译为中文)")};this.inputValue=e(this.inputValue),this.$emit("translate",this.inputValue)}}},u=p,d=s(1656),g=(0,d.A)(u,r,c,!1,null,"fa79ed44",null),h=g.exports,m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"image-settings"},[t("div",{staticClass:"settings-header"},[t("h3",[e._v("图像设置")]),t("el-button",{staticClass:"reset-button",attrs:{type:"text"},on:{click:e.resetSettings}},[t("i",{staticClass:"el-icon-refresh"}),e._v(" 重置 ")])],1),t("div",{staticClass:"settings-content"},[t("div",{staticClass:"setting-item"},[t("span",{staticClass:"setting-label"},[e._v("宽度")]),t("div",{staticClass:"setting-control"},[t("el-select",{attrs:{placeholder:"选择宽度"},on:{change:e.handleChange},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}},e._l(e.dimensionOptions,(function(e){return t("el-option",{key:"width-"+e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),t("div",{staticClass:"setting-item"},[t("span",{staticClass:"setting-label"},[e._v("高度")]),t("div",{staticClass:"setting-control"},[t("el-select",{attrs:{placeholder:"选择高度"},on:{change:e.handleChange},model:{value:e.height,callback:function(t){e.height=t},expression:"height"}},e._l(e.dimensionOptions,(function(e){return t("el-option",{key:"height-"+e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),t("div",{staticClass:"setting-item"},[t("span",{staticClass:"setting-label"},[e._v(" 采样方法 "),t("el-tooltip",{attrs:{content:"不同采样方法会影响图像生成的质量和风格",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",{staticClass:"setting-control"},[t("el-select",{attrs:{placeholder:"选择采样方法"},on:{change:e.handleChange},model:{value:e.sampler,callback:function(t){e.sampler=t},expression:"sampler"}},e._l(e.samplerOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),t("div",{staticClass:"setting-item"},[t("span",{staticClass:"setting-label"},[e._v(" 采样步数 "),t("el-tooltip",{attrs:{content:"步数越高，细节越丰富，但耗时也越长",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",{staticClass:"setting-control"},[t("el-slider",{attrs:{min:10,max:50,step:1,"show-input":"","show-input-controls":!1},on:{change:e.handleChange},model:{value:e.steps,callback:function(t){e.steps=t},expression:"steps"}})],1)]),t("div",{staticClass:"setting-item"},[t("span",{staticClass:"setting-label"},[e._v(" CFG Scale "),t("el-tooltip",{attrs:{content:"越高，生成图像越接近提示词；过高可能导致过度饱和",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",{staticClass:"setting-control"},[t("el-slider",{attrs:{min:1,max:20,step:.5,"show-input":"","show-input-controls":!1},on:{change:e.handleChange},model:{value:e.cfgScale,callback:function(t){e.cfgScale=t},expression:"cfgScale"}})],1)]),t("div",{staticClass:"setting-item"},[t("span",{staticClass:"setting-label"},[e._v(" 生成数量 "),t("el-tooltip",{attrs:{content:"一次生成的图像数量",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",{staticClass:"setting-control"},[t("el-input-number",{attrs:{min:1,max:4,step:1},on:{change:e.handleChange},model:{value:e.batchCount,callback:function(t){e.batchCount=t},expression:"batchCount"}})],1)]),t("div",{staticClass:"setting-item seed-setting"},[t("div",{staticClass:"seed-header"},[t("span",{staticClass:"setting-label"},[e._v(" 随机种子 "),t("el-tooltip",{attrs:{content:"影响生成的随机性，固定种子可以得到相似的结果",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("el-switch",{attrs:{"active-text":"固定种子","inactive-text":"随机种子"},on:{change:e.handleSeedToggle},model:{value:e.useSeed,callback:function(t){e.useSeed=t},expression:"useSeed"}})],1),e.useSeed?t("div",{staticClass:"setting-control"},[t("el-input",{attrs:{type:"number",placeholder:"输入种子值"},on:{change:e.handleChange},model:{value:e.seed,callback:function(t){e.seed=t},expression:"seed"}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.generateRandomSeed}},[e._v("随机")])],1):e._e()])])])},v=[],b={name:"ImageSettings",props:{value:{type:Object,default:()=>({width:512,height:512,sampler:"euler_a",steps:28,cfgScale:7,batchCount:1,seed:-1,useSeed:!1})}},data(){return{width:this.value.width,height:this.value.height,sampler:this.value.sampler,steps:this.value.steps,cfgScale:this.value.cfgScale,batchCount:this.value.batchCount,seed:this.value.seed,useSeed:this.value.useSeed,dimensionOptions:[{value:384,label:"384px"},{value:512,label:"512px"},{value:640,label:"640px"},{value:768,label:"768px"},{value:1024,label:"1024px"}],samplerOptions:[{value:"euler_a",label:"Euler a"},{value:"euler",label:"Euler"},{value:"lms",label:"LMS"},{value:"heun",label:"Heun"},{value:"dpm2",label:"DPM2"},{value:"dpm2_a",label:"DPM2 a"},{value:"ddim",label:"DDIM"}]}},methods:{handleChange(){this.emitSettings()},handleSeedToggle(){this.useSeed&&-1===this.seed&&this.generateRandomSeed(),this.emitSettings()},generateRandomSeed(){this.seed=Math.floor(2147483647*Math.random()),this.emitSettings()},resetSettings(){this.width=512,this.height=512,this.sampler="euler_a",this.steps=28,this.cfgScale=7,this.batchCount=1,this.seed=-1,this.useSeed=!1,this.emitSettings()},emitSettings(){const e={width:this.width,height:this.height,sampler:this.sampler,steps:this.steps,cfgScale:this.cfgScale,batchCount:this.batchCount,seed:this.useSeed?this.seed:-1,useSeed:this.useSeed};this.$emit("input",e),this.$emit("change",e)}}},f=b,C=(0,d.A)(f,m,v,!1,null,"a44cb262",null),_=C.exports,w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"advanced-settings"},[e.useCollapse?t("el-collapse",[t("el-collapse-item",{attrs:{title:"高级设置",name:"1"}},[t("div",{staticClass:"settings-content"},[t("render-settings")],1)])],1):t("div",{staticClass:"settings-content"},[t("render-settings")],1)],1)},k=[],y=(s(8111),s(1701),{name:"AdvancedSettings",props:{useCollapse:{type:Boolean,default:!0},settings:{type:Object,default:()=>({})}},components:{renderSettings:{functional:!0,render(e,t){const{parent:s}=t;return e("div",{class:"settings-grid"},[s.denoiseStrength?e("div",{class:"setting-item"},[e("div",{class:"setting-header"},[e("span",{class:"setting-label"},"噪声去除强度 Denoising Strength"),s.renderTooltip(e,"控制图像生成过程中的噪声移除程度，值越高创新程度越大")]),e("div",{class:"slider-with-value"},[e("el-slider",{props:{value:s.denoiseStrength,min:0,max:1,step:.01,"show-stops":!1},on:{input:e=>{s.updateSetting("denoiseStrength",e)}}}),e("el-input",{props:{value:s.denoiseStrength,type:"number",min:0,max:1,step:.01},class:"value-input",on:{input:e=>{s.updateSetting("denoiseStrength",parseFloat(e)||0)}}})])]):null,s.showEnhancement?e("div",{class:"setting-item"},[e("div",{class:"setting-header"},[e("span",{class:"setting-label"},"启用效果增强")]),e("div",{class:"enhancement-settings"},[e("el-checkbox",{props:{value:s.enableEnhancement},on:{input:e=>{s.updateSetting("enableEnhancement",e)}}},"全面增强 Enhance"),e("div",{class:"slider-with-value"},[e("el-slider",{props:{value:s.enhancementStrength,min:0,max:1,step:.1,disabled:!s.enableEnhancement},on:{input:e=>{s.updateSetting("enhancementStrength",e)}}})])])]):null,s.showDetailEnhancement?e("div",{class:"setting-item"},[e("div",{class:"setting-header"},[e("span",{class:"setting-label"},"细节增强 Detail"),s.renderTooltip(e,"增强图像细节，生成更清晰锐利的图像")]),e("div",{class:"slider-with-value"},[e("el-slider",{props:{value:s.detailStrength,min:0,max:1,step:.1,"show-stops":!1,disabled:!s.enableEnhancement},on:{input:e=>{s.updateSetting("detailStrength",e)}}}),e("el-input",{props:{value:s.detailStrength,type:"number",min:0,max:1,step:.1,disabled:!s.enableEnhancement},class:"value-input",on:{input:e=>{s.updateSetting("detailStrength",parseFloat(e)||0)}}})])]):null,s.showQuality?e("div",{class:"setting-item"},[e("div",{class:"setting-header"},[e("span",{class:"setting-label"},"图像质量 Quality"),s.renderTooltip(e,"影响整体图像质量，较高的值会生成更高质量的图像")]),e("div",{class:"slider-with-value"},[e("el-slider",{props:{value:s.quality,min:0,max:1,step:.1,"show-stops":!1,disabled:!s.enableEnhancement},on:{input:e=>{s.updateSetting("quality",e)}}}),e("el-input",{props:{value:s.quality,type:"number",min:0,max:1,step:.1,disabled:!s.enableEnhancement},class:"value-input",on:{input:e=>{s.updateSetting("quality",parseFloat(e)||0)}}})])]):null,s.showClipSkip?e("div",{class:"setting-item"},[e("div",{class:"setting-header"},[e("span",{class:"setting-label"},"CLIP跳过 Clip Skip"),s.renderTooltip(e,"控制使用CLIP模型哪一层的特征，可能会影响生成的图像风格")]),e("div",{class:"slide-with-number"},[e("el-input-number",{props:{value:s.clipSkip,min:1,max:12,step:1},on:{input:e=>{s.updateSetting("clipSkip",e)}}})])]):null,s.showUpscaler?e("div",{class:"setting-item full-width"},[e("div",{class:"setting-header"},[e("span",{class:"setting-label"},"Upscaler1"),s.renderTooltip(e,"选择放大算法")]),e("el-select",{props:{value:s.upscaler1,placeholder:"选择放大算法"},on:{input:e=>{s.updateSetting("upscaler1",e)}}},s.upscalerOptions.map((t=>e("el-option",{props:{key:t.value,label:t.label,value:t.value}}))))]):null,s.showUpscaler2?e("div",{class:"setting-item"},[e("div",{class:"setting-header"},[e("span",{class:"setting-label"},"Upscaler2"),s.renderTooltip(e,"第二放大算法及其权重")]),e("div",{class:"upscaler-with-weight"},[e("el-select",{props:{value:s.upscaler2,placeholder:"选择放大算法"},style:{width:"60%"},on:{input:e=>{s.updateSetting("upscaler2",e)}}},s.upscalerOptions.map((t=>e("el-option",{props:{key:t.value,label:t.label,value:t.value}})))),e("div",{class:"slider-with-value",style:{width:"40%",marginLeft:"10px"}},[e("el-slider",{props:{value:s.upscaler2Weight,min:0,max:1,step:.01,"show-stops":!1},on:{input:e=>{s.updateSetting("upscaler2Weight",e)}}})])])]):null,s.showFaceRestore?e("div",{class:"setting-item"},[e("div",{class:"setting-header"},[e("span",{class:"setting-label"},"面部修复"),s.renderTooltip(e,"修复和增强面部特征")]),e("el-checkbox",{props:{value:s.faceRestore},on:{input:e=>{s.updateSetting("faceRestore",e)}}},"启用面部修复")]):null,s.showGuidanceScale?e("div",{class:"setting-item"},[e("div",{class:"setting-header"},[e("span",{class:"setting-label"},"引导系数 Guidance Scale"),s.renderTooltip(e,"控制生成图像与文本提示的匹配程度，值越高匹配越严格")]),e("div",{class:"slider-with-value"},[e("el-slider",{props:{value:s.guidanceScale,min:1,max:30,step:.5,"show-stops":!1},on:{input:e=>{s.updateSetting("guidanceScale",e)}}}),e("el-input",{props:{value:s.guidanceScale,type:"number",min:1,max:30,step:.5},class:"value-input",on:{input:e=>{s.updateSetting("guidanceScale",parseFloat(e)||7)}}})])]):null,s.showTips?e("div",{class:"setting-item full-width"},[e("div",{class:"tips-section"},[e("div",{class:"tips-header"},[e("span","Tips")]),e("div",{class:"tips-content"},[e("p","效果增强在基础模型上下调整参数，可提高效果")])])]):null].filter(Boolean))}}},data(){return{denoiseStrength:this.settings.denoiseStrength||.75,enableEnhancement:this.settings.enableEnhancement||!1,enhancementStrength:this.settings.enhancementStrength||1,detailStrength:this.settings.detailStrength||.5,quality:this.settings.quality||1,clipSkip:this.settings.clipSkip||2,upscaler1:this.settings.upscaler1||"Lanczos",upscaler2:this.settings.upscaler2||"Lanczos",upscaler2Weight:this.settings.upscaler2Weight||.5,faceRestore:this.settings.faceRestore||!1,guidanceScale:this.settings.guidanceScale||7.5,showDenoiseStrength:void 0===this.settings.showDenoiseStrength||this.settings.showDenoiseStrength,showEnhancement:void 0===this.settings.showEnhancement||this.settings.showEnhancement,showDetailEnhancement:void 0===this.settings.showDetailEnhancement||this.settings.showDetailEnhancement,showQuality:void 0===this.settings.showQuality||this.settings.showQuality,showClipSkip:void 0===this.settings.showClipSkip||this.settings.showClipSkip,showUpscaler:void 0===this.settings.showUpscaler||this.settings.showUpscaler,showUpscaler2:void 0===this.settings.showUpscaler2||this.settings.showUpscaler2,showFaceRestore:void 0===this.settings.showFaceRestore||this.settings.showFaceRestore,showGuidanceScale:void 0===this.settings.showGuidanceScale||this.settings.showGuidanceScale,showTips:void 0===this.settings.showTips||this.settings.showTips,upscalerOptions:[{value:"Lanczos",label:"Lanczos"},{value:"Nearest",label:"Nearest"},{value:"ESRGAN_4x",label:"ESRGAN 4x"},{value:"R-ESRGAN 4x+",label:"R-ESRGAN 4x+"},{value:"LDSR",label:"LDSR"}]}},methods:{updateSetting(e,t){this[e]=t,this.$emit("update",{...this.getAllSettings()})},getAllSettings(){return{denoiseStrength:this.denoiseStrength,enableEnhancement:this.enableEnhancement,enhancementStrength:this.enhancementStrength,detailStrength:this.detailStrength,quality:this.quality,clipSkip:this.clipSkip,upscaler1:this.upscaler1,upscaler2:this.upscaler2,upscaler2Weight:this.upscaler2Weight,faceRestore:this.faceRestore,guidanceScale:this.guidanceScale}},renderTooltip(e,t){return e("el-tooltip",{props:{content:t,placement:"top"}},[e("i",{class:"el-icon-question"})])}}}),x=y,S=(0,d.A)(x,w,k,!1,null,"cf45d904",null),I=S.exports,P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"generate-button-container"},[t("div",{staticClass:"credit-info"},[t("div",{staticClass:"token-info"},[t("span",{staticClass:"token-label"},[e._v("消耗积分：")]),t("span",{staticClass:"token-value"},[e._v(e._s(e.tokenCost))]),t("el-tooltip",{attrs:{content:"生成一张图像消耗的积分数量",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",{staticClass:"balance-info"},[t("span",{staticClass:"balance-label"},[e._v("剩余积分：")]),t("span",{staticClass:"balance-value",class:{"low-balance":e.isLowBalance}},[e._v(e._s(e.tokenBalance))]),t("el-button",{staticClass:"recharge-button",attrs:{type:"text"},on:{click:e.showRechargeDialog}},[e._v("充值")])],1)]),t("div",{staticClass:"queue-selection"},[t("div",{staticClass:"queue-options"},[t("div",{staticClass:"queue-option",class:{active:"normal"===e.selectedQueue},on:{click:function(t){return e.selectQueue("normal")}}},[e._m(0),t("div",{staticClass:"queue-info"},[t("h4",[e._v("普通队列")]),t("p",[e._v("预计等待时间: "+e._s(e.normalQueueWaitTime))])])]),t("div",{staticClass:"queue-option vip",class:{active:"vip"===e.selectedQueue,disabled:!e.isVipUser},on:{click:function(t){return e.selectQueue("vip")}}},[e._m(1),t("div",{staticClass:"queue-info"},[t("h4",[e._v("会员加速 "),t("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v("VIP")])],1),t("p",[e._v("立即生成，优先处理")])]),e.isVipUser?e._e():t("div",{staticClass:"vip-lock"},[t("i",{staticClass:"el-icon-lock"})])])]),e.isVipUser?e._e():t("div",{staticClass:"upgrade-tip"},[t("p",[e._v("开通VIP会员可享受优先生成特权 "),t("el-button",{attrs:{type:"text"},on:{click:e.openVipOptions}},[e._v("立即开通")])],1)])]),t("div",{staticClass:"buttons-row"},[t("el-button",{staticClass:"generate-button",attrs:{type:"primary",disabled:e.isGenerating||!e.canGenerate,loading:e.isGenerating},on:{click:e.onGenerate}},[e._v(" "+e._s(e.generateButtonText)+" ")]),e.showStopButton?t("el-button",{staticClass:"stop-button",attrs:{type:"danger",disabled:!e.isGenerating},on:{click:e.onStop}},[e._v(" 停止生成 ")]):e._e()],1),e.isGenerating?t("div",{staticClass:"progress-info"},[t("el-progress",{staticClass:"progress-bar",attrs:{percentage:e.generationProgress,"show-text":!1}}),t("div",{staticClass:"progress-text"},[t("span",[e._v(e._s(e.progressText))]),t("span",[e._v(e._s(e.generationProgress)+"%")])])],1):e._e()])},T=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"queue-icon"},[t("i",{staticClass:"el-icon-time"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"queue-icon"},[t("i",{staticClass:"el-icon-lightning"})])}],D={name:"GenerateButton",props:{tokenCost:{type:[Number,String],default:1},tokenBalance:{type:[Number,String],default:10},isGenerating:{type:Boolean,default:!1},generationProgress:{type:Number,default:0},canGenerate:{type:Boolean,default:!0},progressText:{type:String,default:"生成中..."},showStopButton:{type:Boolean,default:!0},isVipUser:{type:Boolean,default:!1}},data(){return{selectedQueue:"normal",normalQueueWaitTime:"约3-5分钟"}},computed:{isLowBalance(){return parseFloat(this.tokenBalance)<parseFloat(this.tokenCost)},generateButtonText(){return this.isGenerating?"生成中...":"生成图像"}},methods:{onGenerate(){this.isLowBalance?this.showRechargeDialog():this.$emit("generate",{queueType:this.selectedQueue})},onStop(){this.$emit("stop")},showRechargeDialog(){this.$emit("recharge")},selectQueue(e){"vip"!==e||this.isVipUser?this.selectedQueue=e:this.openVipOptions()},openVipOptions(){this.$emit("open-vip")}}},$=D,z=(0,d.A)($,P,T,!1,null,"0456f6b6",null),M=z.exports;function F(e){const{width:t=512,height:s=512,steps:i=30,batchSize:a=1,model:n="default",upscale:l=!1,faceRestore:o=!1}=e;let r=10;const c=t*s,p=c/1048576;return r+=Math.ceil(50*p),r+=2*Math.floor((i-20)/5),r*=a,"sdxl"===n||"sdxl-turbo"===n?r*=1.5:"realistic"!==n&&"anime-detail"!==n||(r*=1.2),l&&(r+=5),o&&(r+=3),Math.ceil(r)}function R(){return Math.floor(2147483647*Math.random())}function V(e=70,t=80){const s=Math.floor(360*Math.random());return`hsl(${s}, ${e}%, ${t}%)`}function A(e,t=3e3){return new Promise((s=>{let i=0;const a=100,n=100/(t/a),l=setInterval((()=>{i+=n,i>=100&&(i=100,clearInterval(l),s({images:[{id:Date.now(),url:"#",color:V()}],parameters:{prompt:"模拟生成的图像",seed:R()}})),e&&e(Math.round(i))}),a)}))}function U(){return[{value:"base",label:"基础模型 F.1.safetensors"},{value:"sdxl",label:"SDXL 1.0"},{value:"realistic",label:"真实风格 RealisticVision"},{value:"anime",label:"动漫风格 AnimeArt"},{value:"midjourney",label:"Midjourney 风格"}]}function G(){return[{value:"Euler",label:"Euler"},{value:"Euler a",label:"Euler a"},{value:"DPM++ 2M",label:"DPM++ 2M"},{value:"DPM++ SDE",label:"DPM++ SDE"},{value:"DPM++ 2M Karras",label:"DPM++ 2M Karras"},{value:"DPM++ SDE Karras",label:"DPM++ SDE Karras"},{value:"UniPC",label:"UniPC"}]}function L(){return[{value:"None",label:"无"},{value:"Lanczos",label:"Lanczos"},{value:"R-ESRGAN 4x+",label:"R-ESRGAN 4x+"},{value:"LDSR",label:"LDSR"},{value:"SwinIR",label:"SwinIR"}]}var B={name:"TextToImageTab",components:{PromptInput:h,ImageSettings:_,AdvancedSettings:I,GenerateButton:M},data(){return{prompts:{positive:"",negative:""},settings:{model:"stabilityai/stable-diffusion-xl-base-1.0",imageSettings:{width:1024,height:1024,sampler:"DPM++ 2M Karras",steps:30,batchSize:1,cfgScale:7,seed:-1},useUpscale:!1,upscaleScale:2,upscaleModel:"realesrgan-x4plus",faceRestoration:!1,advancedSettings:{denoisingStrength:.7,clipSkip:1,useHighResMask:!1,useRestoreFaces:!1,useHiresFix:!1}},isGenerating:!1,loadingDialog:!1,generationProgress:0,progressText:"生成中...",generatedImages:[],isVipUser:!1,userTokens:50,freeUserDailyLimit:3,vipDialog:{visible:!1,selectedPlan:null},tokensDialog:{visible:!1,selectedPackage:null},vipPlans:[{id:1,name:"基础会员",price:28,period:"月",features:["每天生成30张图像","优先队列处理","最大1024x1024分辨率","基础超分辨率"]},{id:2,name:"高级会员",price:58,period:"月",features:["每天生成100张图像","立即处理，无需等待","最大2048x2048分辨率","高级超分辨率和面部修复","高级提示词辅助"]},{id:3,name:"年度会员",price:488,period:"年",features:["每天生成无限图像","最高优先级处理","最大4096x4096分辨率","所有高级功能","免费获赠6000积分","专属客服支持"]}],tokenPackages:[{id:1,amount:100,price:10,bonus:0},{id:2,amount:500,price:45,bonus:50},{id:3,amount:1e3,price:80,bonus:200},{id:4,amount:2e3,price:150,bonus:500}],modelOptions:U(),vaeModel:"auto",sampler:"Euler a",steps:30,cfgScale:7,seed:-1,batchSize:1,samplerOptions:G(),upscalerOptions:L(),showAdvancedSettings:!1}},computed:{totalTokens(){return F({width:this.settings.imageSettings.width,height:this.settings.imageSettings.height,steps:this.settings.imageSettings.steps,batchSize:this.settings.imageSettings.batchSize,modelType:this.settings.model,useUpscale:this.settings.useUpscale,upscaleScale:this.settings.upscaleScale,faceRestoration:this.settings.faceRestoration})},canGenerate(){return this.prompts.positive.trim().length>0&&this.userTokens>=this.totalTokens},displayImages(){return this.generatedImages.length>0?this.generatedImages:[]}},methods:{refreshModels(){this.$message.info("刷新模型列表")},refreshVae(){this.$message.info("刷新VAE模型列表")},updateTokenUsage(){console.log("更新积分使用量:",this.totalTokens)},async generateImage(e){this.canGenerate&&(!this.settings.useUpscale||this.isVipUser?(this.isGenerating=!0,this.generationProgress=0,this.progressText=e&&"vip"===e.queueType?"VIP优先生成中...":"普通队列生成中...",-1===this.settings.imageSettings.seed&&(this.settings.imageSettings.seed=R()),A((e=>{this.generationProgress=e}),e&&"vip"===e.queueType?3e3:8e3).then((()=>{const e={id:Date.now(),url:`https://picsum.photos/seed/${Math.floor(1e3*Math.random())}/1024/1024`,prompt:this.prompts.positive,negativePrompt:this.prompts.negative,settings:JSON.parse(JSON.stringify(this.settings)),timestamp:(new Date).toISOString(),width:this.settings.imageSettings.width,height:this.settings.imageSettings.height};this.generatedImages.unshift(e),this.isGenerating=!1,this.userTokens-=this.totalTokens}))):this.openVipOptions())},clearGeneratedImages(){this.generatedImages=[]},saveImage(){this.$message.success("图像已保存到画廊")},downloadImage(){this.$message.success("开始下载图像")},updatePrompt(e,t){this.prompts[e]=t},openVipOptions(){this.vipDialog.visible=!0},selectVipPlan(e){this.vipDialog.selectedPlan=e},confirmVipPurchase(e){this.vipDialog.selectedPlan?(this.$message.success(`您已成功开通${e.name}，享受VIP特权！`),this.isVipUser=!0,this.vipDialog.visible=!1,this.vipDialog.selectedPlan=null):this.vipDialog.selectedPlan=e},openBuyTokens(){this.tokensDialog.visible=!0},selectTokenPackage(e){this.tokensDialog.selectedPackage=e},confirmTokenPurchase(){if(!this.tokensDialog.selectedPackage)return;const e=this.tokensDialog.selectedPackage;this.userTokens+=e.amount+(e.bonus||0),this.$message.success(`您已成功购买${e.amount}积分${e.bonus?"，赠送"+e.bonus+"积分":""}！`),this.tokensDialog.visible=!1,this.tokensDialog.selectedPackage=null},previewImage(e){this.currentPreviewImage=e,this.previewDialog=!0},favoriteImage(e){this.$message.success(`图像${e.id}已添加到收藏`)},saveAllImages(){this.$message.success("所有图像已保存")},clearResults(){this.generatedImages=[]},showPromptHistory(){this.$message.info("显示提示词历史记录")},showPromptLibrary(){this.$message.info("显示提示词库")},showNegativeHistory(){this.$message.info("显示负向提示词历史记录")},showNegativeLibrary(){this.$message.info("显示负向提示词库")},stopGeneration(){this.isGenerating=!1},progressFormat(e){return`${e}%`}}},E=B,O=(0,d.A)(E,l,o,!1,null,"4e151399",null),N=O.exports,q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"image-to-image-tab"},[e._m(0),t("div",{staticClass:"main-container"},[t("div",{staticClass:"left-panel"},[t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("图片上传")]),t("image-uploader",{attrs:{"show-source-options":!0,"source-buttons":e.sourceButtons},on:{"source-button-click":e.handleSourceButtonClick,change:e.handleImageChange},model:{value:e.sourceImage,callback:function(t){e.sourceImage=t},expression:"sourceImage"}})],1),t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("图像尺寸")]),t("div",{staticClass:"resize-tabs"},[t("el-radio-group",{attrs:{size:"small"},model:{value:e.resizeMode,callback:function(t){e.resizeMode=t},expression:"resizeMode"}},[t("el-radio-button",{attrs:{label:"resizeTo"}},[e._v("Resize To")]),t("el-radio-button",{attrs:{label:"resizeBy"}},[e._v("Resize by")])],1)],1),t("div",{staticClass:"resize-controls"},[t("div",{staticClass:"dimension-control"},[t("label",[e._v("宽度 Width")]),t("el-input",{attrs:{type:"number",min:64,max:2048,step:64},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1),t("div",{staticClass:"dimension-control"},[t("label",[e._v("高度 Height")]),t("el-input",{attrs:{type:"number",min:64,max:2048,step:64},model:{value:e.height,callback:function(t){e.height=t},expression:"height"}})],1)]),t("div",{staticClass:"aspect-ratio"},[e.sourceImage?t("span",[e._v("从 "+e._s(e.originalWidth)+"*"+e._s(e.originalHeight)+" 缩放到 "+e._s(e.width)+"*"+e._s(e.height))]):e._e(),t("div",{staticClass:"aspect-buttons"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-crop",title:"1:1"},on:{click:function(t){return e.setAspectRatio(1,1)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-picture",title:"4:3"},on:{click:function(t){return e.setAspectRatio(4,3)}}})],1)])]),t("div",{staticClass:"control-section"},[t("prompt-input",{attrs:{label:"提示词 Prompt",placeholder:"请输入正向提示词描述你想要的图像内容",rows:4,maxlength:1e3,"show-tips":!1},on:{translate:e.onTranslatePrompt,"show-history":e.showPromptHistory,"show-library":e.showPromptLibrary},model:{value:e.prompt,callback:function(t){e.prompt=t},expression:"prompt"}})],1),t("div",{staticClass:"control-section"},[t("prompt-input",{attrs:{label:"负向提示词 Negative Prompt",placeholder:"请输入负向提示词描述你不想在图像中出现的元素",rows:2,maxlength:500,"show-tips":!1},on:{translate:e.onTranslateNegative,"show-history":e.showNegativeHistory,"show-library":e.showNegativeLibrary},model:{value:e.negativePrompt,callback:function(t){e.negativePrompt=t},expression:"negativePrompt"}})],1),t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("模型设置")]),t("div",{staticClass:"setting-item"},[t("label",[e._v("方法")]),t("el-select",{staticClass:"full-width",attrs:{placeholder:"选择方法"},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},e._l(e.methodOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"setting-item"},[t("label",[e._v("噪声去除强度 Denoising Strength")]),t("el-tooltip",{attrs:{content:"控制生成的图像与原图的相似度，值越高创新程度越大",placement:"top"}},[t("i",{staticClass:"el-icon-question"})]),t("div",{staticClass:"slider-with-value"},[t("el-slider",{attrs:{min:0,max:1,step:.01,"format-tooltip":e=>e.toFixed(2)},model:{value:e.denoiseStrength,callback:function(t){e.denoiseStrength=t},expression:"denoiseStrength"}}),t("el-input",{staticClass:"value-input",attrs:{type:"number",min:0,max:1,step:.01},model:{value:e.denoiseStrength,callback:function(t){e.denoiseStrength=e._n(t)},expression:"denoiseStrength"}})],1)],1)]),t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("采样设置")]),t("div",{staticClass:"setting-item"},[t("label",[e._v("采样方法")]),t("el-select",{staticClass:"full-width",attrs:{placeholder:"选择采样方法"},model:{value:e.sampler,callback:function(t){e.sampler=t},expression:"sampler"}},e._l(e.samplerOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"setting-item"},[t("label",[e._v("采样步数")]),t("div",{staticClass:"slider-with-value"},[t("el-slider",{attrs:{min:1,max:50,step:1,"show-stops":!1},model:{value:e.steps,callback:function(t){e.steps=t},expression:"steps"}}),t("el-input",{staticClass:"value-input",attrs:{type:"number",min:1,max:50,step:1},model:{value:e.steps,callback:function(t){e.steps=e._n(t)},expression:"steps"}})],1)]),t("div",{staticClass:"setting-item"},[t("label",[e._v("CFG Scale")]),t("div",{staticClass:"slider-with-value"},[t("el-slider",{attrs:{min:1,max:15,step:.5,"show-stops":!1},model:{value:e.cfgScale,callback:function(t){e.cfgScale=t},expression:"cfgScale"}}),t("el-input",{staticClass:"value-input",attrs:{type:"number",min:1,max:15,step:.5},model:{value:e.cfgScale,callback:function(t){e.cfgScale=e._n(t)},expression:"cfgScale"}})],1)]),t("div",{staticClass:"setting-item"},[t("label",[e._v("随机种子")]),t("div",{staticClass:"seed-input"},[t("el-input",{attrs:{placeholder:"留空为随机"},model:{value:e.seed,callback:function(t){e.seed=t},expression:"seed"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:e.randomizeSeed},slot:"append"})],1)],1)]),t("div",{staticClass:"setting-item"},[t("label",[e._v("图片数量")]),t("div",{staticClass:"image-count-buttons"},[t("el-button-group",e._l([1,2,4,8],(function(s){return t("el-button",{key:s,attrs:{size:"small",type:e.batchSize===s?"primary":""},on:{click:function(t){e.batchSize=s}}},[e._v(" "+e._s(s)+" ")])})),1)],1)])]),t("div",{staticClass:"control-section"},[t("div",{staticClass:"token-info"},[t("div",{staticClass:"token-count"},[t("span",[e._v("预计消耗积分: "),t("b",[e._v(e._s(e.totalTokens))])]),t("el-tooltip",{attrs:{content:"积分消耗根据图像分辨率、步数和批次计算",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",{staticClass:"user-tokens"},[t("span",[e._v("可用积分: "),t("b",[e._v(e._s(e.userTokens))])]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.openBuyTokens}},[e._v("购买积分")])],1)]),t("generate-button",{attrs:{"token-cost":e.totalTokens,"token-balance":e.userTokens,"is-generating":e.isGenerating,"generation-progress":e.generationProgress,"can-generate":e.canGenerate&&e.hasUploadedImage,"progress-text":e.progressText||"生成中...","show-stop-button":!0,"is-vip-user":e.isVipUser},on:{generate:e.generateImage,stop:e.stopGeneration,recharge:e.openBuyTokens,"open-vip":e.openVipOptions}}),e.isVipUser?e._e():t("div",{staticClass:"generation-limits"},[t("p",[e._v("免费用户每天限制生成 "+e._s(e.freeUserDailyLimit)+" 张图片 "),t("el-button",{attrs:{type:"text"},on:{click:e.openVipOptions}},[e._v("升级会员解锁更多")])],1)])],1)]),t("div",{staticClass:"right-panel"},[t("div",{staticClass:"preview-panel"},[t("div",{staticClass:"preview-header"},[t("h3",{staticClass:"panel-title"},[e._v("生成预览")]),e.generatedImages.length>0?t("div",{staticClass:"preview-actions"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download"},on:{click:e.saveAllImages}},[e._v("保存所有")]),t("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.clearResults}},[e._v("清除结果")])],1):e._e()]),e.generatedImages.length>0?t("div",{staticClass:"preview-content"},[t("div",{staticClass:"image-grid"},e._l(e.generatedImages,(function(s,i){return t("div",{key:i,staticClass:"image-item"},[t("div",{staticClass:"image-container"},[t("img",{staticClass:"generated-image",attrs:{src:s.url,alt:"生成的图片"}})]),t("div",{staticClass:"image-actions"},[t("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(t){return e.previewImage(s)}}},[e._v("查看")]),t("el-button",{attrs:{type:"text",icon:"el-icon-download"},on:{click:function(t){return e.downloadImage(s)}}},[e._v("下载")]),t("el-button",{attrs:{type:"text",icon:"el-icon-star-off"},on:{click:function(t){return e.favoriteImage(s)}}},[e._v("收藏")])],1)])})),0)]):t("div",{staticClass:"empty-preview"},[e._m(1)]),e.isGenerating?t("div",{staticClass:"generation-progress"},[t("el-progress",{attrs:{percentage:e.generationProgress,format:e.progressFormat}}),t("p",[e._v("正在生成图像，请稍等...")])],1):e._e()])])]),t("el-dialog",{attrs:{title:"生成中",visible:e.loadingDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"30%"},on:{"update:visible":function(t){e.loadingDialog=t}}},[t("div",{staticClass:"loading-dialog-content"},[t("el-progress",{attrs:{percentage:e.generationProgress,format:e.progressFormat}}),t("p",[e._v("正在生成您的图像，请稍等...")])],1)])],1)},W=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-header"},[t("h2",{staticClass:"tab-title"},[e._v("图生图")]),t("p",{staticClass:"tab-description"},[e._v("上传图片，使用AI进行改编和变换")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"empty-placeholder"},[t("i",{staticClass:"el-icon-picture-outline"}),t("p",[e._v('请在左侧上传图片、配置参数并点击"生成图像"按钮')])])}],H=(s(7588),function(){var e=this,t=e._self._c;return t("div",{staticClass:"image-uploader"},[t("div",{staticClass:"upload-area",class:{"is-dragover":e.isDragover,"has-image":e.hasImage},on:{dragover:function(t){t.preventDefault(),e.isDragover=!0},dragleave:function(t){t.preventDefault(),e.isDragover=!1},drop:function(t){return t.preventDefault(),e.onDrop.apply(null,arguments)},click:e.openFileDialog}},[t("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:"image/*"},on:{change:e.handleFileChange}}),e.hasImage?t("div",{staticClass:"image-preview"},[t("img",{staticClass:"preview-img",attrs:{src:e.previewUrl,alt:"已上传图片"}}),t("div",{staticClass:"image-actions"},[t("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(t){return t.stopPropagation(),e.removeImage.apply(null,arguments)}}})],1)]):t("div",{staticClass:"upload-placeholder"},[e._m(0),t("div",{staticClass:"upload-text"},[t("p",{staticClass:"main-text"},[e._v(e._s(e.mainText))]),t("p",{staticClass:"sub-text"},[e._v(e._s(e.subText))])])])]),e.showSourceOptions&&e.hasImage?t("div",{staticClass:"source-controls"},[e.sourceButtons&&e.sourceButtons.length>0?t("div",{staticClass:"source-tabs"},[t("el-button-group",e._l(e.sourceButtons,(function(s,i){return t("el-button",{key:i,attrs:{size:"small",type:s.active?"primary":""},on:{click:function(t){return e.handleSourceButtonClick(s,i)}}},[e._v(" "+e._s(s.label)+" ")])})),1)],1):e._e()]):e._e()])}),Q=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon-wrapper"},[t("i",{staticClass:"el-icon-picture"})])}],j={name:"ImageUploader",props:{value:{type:[File,String,Object],default:null},mainText:{type:String,default:"将图像拖拽到这里 或 点击选择图片"},subText:{type:String,default:"请上传不超过5MB的图片，支持JPG、PNG格式"},showSourceOptions:{type:Boolean,default:!1},sourceButtons:{type:Array,default:()=>[]}},data(){return{isDragover:!1,previewUrl:"",file:null}},computed:{hasImage(){return!!this.previewUrl}},watch:{value:{immediate:!0,handler(e){e?e instanceof File?(this.file=e,this.createPreview(this.file)):"string"===typeof e?this.previewUrl=e:e.url&&(this.previewUrl=e.url):(this.previewUrl="",this.file=null)}}},methods:{openFileDialog(){this.$refs.fileInput.click()},onDrop(e){this.isDragover=!1;const t=e.dataTransfer.files;t.length>0&&this.processFile(t[0])},handleFileChange(e){const t=e.target.files;t.length>0&&this.processFile(t[0])},processFile(e){e.type.match("image.*")?e.size>5242880?this.$message.error("图片大小不能超过5MB"):(this.file=e,this.createPreview(e),this.$emit("input",e),this.$emit("change",e),this.$refs.fileInput.value=""):this.$message.error("请上传图片文件")},createPreview(e){const t=new FileReader;t.onload=e=>{this.previewUrl=e.target.result},t.readAsDataURL(e)},removeImage(e){e.stopPropagation(),this.previewUrl="",this.file=null,this.$emit("input",null),this.$emit("change",null),this.$emit("remove")},handleSourceButtonClick(e,t){this.$emit("source-button-click",{button:e,index:t})}}},K=j,J=(0,d.A)(K,H,Q,!1,null,"29ccf0f2",null),X=J.exports,Y={name:"ImageToImageTab",components:{PromptInput:h,ImageUploader:X,GenerateButton:M},data(){return{sourceImage:null,originalWidth:512,originalHeight:512,resizeMode:"resizeTo",width:512,height:512,imageFormat:"B64",prompt:"",negativePrompt:"ng_deepnegative_v1_75t, badhandv4, (worst quality:2), (low quality:2), (normal quality:2), lowres",method:"MultiDiffusion",sampler:"Euler a",steps:20,cfgScale:7,seed:-1,batchSize:1,denoiseStrength:.75,isGenerating:!1,loadingDialog:!1,generationProgress:0,progressText:"生成中...",generatedImages:[],previewDialog:!1,sourceButtons:[{label:"清晰",active:!0},{label:"局部重绘",active:!1},{label:"涂鸦重绘",active:!1}],methodOptions:[{value:"MultiDiffusion",label:"MultiDiffusion"},{value:"SD Upscale",label:"SD Upscale"}],samplerOptions:G(),currentPreviewImage:null,isVipUser:!1,userTokens:50,freeUserDailyLimit:3,vipDialog:{visible:!1},tokensDialog:{visible:!1}}},computed:{canGenerate(){return this.sourceImage&&this.prompt.trim().length>0&&this.userTokens>=this.totalTokens},creditCount(){return F({width:this.width,height:this.height,steps:this.steps,batchSize:this.batchSize,model:"img2img"})},totalTokens(){return this.sourceImage?F({width:this.width,height:this.height,steps:this.steps,batchSize:this.batchSize,model:"img2img"}):0},hasUploadedImage(){return null!==this.sourceImage}},methods:{handleImageChange(){this.sourceImage&&(this.originalWidth=512,this.originalHeight=512,this.width=this.originalWidth,this.height=this.originalHeight)},setAspectRatio(e,t){const s=Math.round(Number(this.width)/e*t);s>=64&&s<=2048?this.height=s:this.width=Math.round(Number(this.height)/t*e)},handleSourceButtonClick({index:e}){this.sourceButtons.forEach(((t,s)=>{t.active=s===e}))},async generateImage(e){this.canGenerate&&this.sourceImage&&(this.isGenerating=!0,this.loadingDialog=!0,this.generationProgress=0,this.progressText=e&&"vip"===e.queueType?"VIP优先生成中...":"普通队列生成中...",-1===this.seed&&(this.seed=R()),A((e=>{this.generationProgress=e}),e&&"vip"===e.queueType?3e3:7e3).then((()=>{const e=[];for(let t=0;t<this.batchSize;t++)e.push({id:Date.now()+t,url:`https://picsum.photos/seed/${Math.floor(1e3*Math.random())}/512/512`,prompt:this.prompt,negativePrompt:this.negativePrompt,settings:{width:this.width,height:this.height,sampler:this.sampler,steps:this.steps,cfgScale:this.cfgScale,seed:this.seed,denoiseStrength:this.denoiseStrength},color:V(),timestamp:(new Date).toISOString()});this.generatedImages=[...e,...this.generatedImages],this.isGenerating=!1,this.loadingDialog=!1,this.userTokens-=this.totalTokens})).catch((e=>{this.$message.error("生成失败："+e.message),this.isGenerating=!1,this.loadingDialog=!1})))},progressFormat(e){return e+"%"},saveAllImages(){this.$message.success("所有图像已保存")},clearResults(){this.generatedImages=[]},previewImage(e){this.currentPreviewImage=e,this.previewDialog=!0},downloadImage(e){this.$message.success(`图像${e.id}已下载`)},favoriteImage(e){this.$message.success(`图像${e.id}已添加到收藏`)},openVipOptions(){this.vipDialog.visible=!0},openBuyTokens(){this.tokensDialog.visible=!0},randomizeSeed(){this.seed=R()},onTranslatePrompt(e){this.prompt=e},onTranslateNegative(e){this.negativePrompt=e},showPromptHistory(){this.$message.info("显示提示词历史记录")},showPromptLibrary(){this.$message.info("显示提示词库")},showNegativeHistory(){this.$message.info("显示负向提示词历史记录")},showNegativeLibrary(){this.$message.info("显示负向提示词库")},stopGeneration(){this.isGenerating=!1,this.loadingDialog=!1,this.$message.info("已停止生成")}}},Z=Y,ee=(0,d.A)(Z,q,W,!1,null,"f9c69954",null),te=ee.exports,se=function(){var e=this,t=e._self._c;return t("div",{staticClass:"post-processing-tab"},[e._m(0),t("div",{staticClass:"main-container"},[t("div",{staticClass:"left-panel"},[t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("图片上传")]),t("image-uploader",{on:{change:e.handleImageChange},model:{value:e.sourceImage,callback:function(t){e.sourceImage=t},expression:"sourceImage"}})],1),t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("放大设置")]),t("div",{staticClass:"setting-item"},[t("label",[e._v("放大倍数")]),t("el-tooltip",{attrs:{content:"选择图像放大的倍数",placement:"top"}},[t("i",{staticClass:"el-icon-question"})]),t("el-input-number",{staticClass:"full-width",attrs:{min:1,max:4,step:.5,precision:1},model:{value:e.resizeFactor,callback:function(t){e.resizeFactor=t},expression:"resizeFactor"}})],1),e.sourceImage?t("div",{staticClass:"resize-info"},[t("span",[e._v("从 "+e._s(e.originalWidth)+"*"+e._s(e.originalHeight)+" 放大到 "+e._s(Math.round(e.originalWidth*e.resizeFactor))+"*"+e._s(Math.round(e.originalHeight*e.resizeFactor)))])]):e._e()]),t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("图像增强")]),t("div",{staticClass:"enhancement-option"},[t("div",{staticClass:"option-header"},[t("el-checkbox",{model:{value:e.enableEnhancement,callback:function(t){e.enableEnhancement=t},expression:"enableEnhancement"}},[e._v("全面增强 Enhance")])],1),e.enableEnhancement?t("div",{staticClass:"slider-with-value"},[t("el-slider",{attrs:{min:0,max:1,step:.1},model:{value:e.enhancementStrength,callback:function(t){e.enhancementStrength=t},expression:"enhancementStrength"}}),t("span",{staticClass:"value-display"},[e._v(e._s(e.enhancementStrength))])],1):e._e()]),t("div",{staticClass:"enhancement-option"},[t("div",{staticClass:"option-header"},[t("el-checkbox",{model:{value:e.faceRestore,callback:function(t){e.faceRestore=t},expression:"faceRestore"}},[e._v("面部修复")])],1),e.faceRestore?t("div",{staticClass:"face-restore-settings"},[t("label",[e._v("面部模糊度：")]),t("el-slider",{attrs:{min:0,max:8,step:1},model:{value:e.faceRestoreBlur,callback:function(t){e.faceRestoreBlur=t},expression:"faceRestoreBlur"}})],1):e._e()]),t("div",{staticClass:"enhancement-option"},[e._m(1),t("el-slider",{attrs:{min:0,max:1,step:.1},model:{value:e.sharpness,callback:function(t){e.sharpness=t},expression:"sharpness"}})],1),t("div",{staticClass:"enhancement-option"},[e._m(2),t("el-slider",{attrs:{min:0,max:1,step:.1},model:{value:e.denoiseStrength,callback:function(t){e.denoiseStrength=t},expression:"denoiseStrength"}})],1),e.isVipUser||!e.enableEnhancement&&!e.faceRestore?e._e():t("div",{staticClass:"vip-notice"},[t("el-alert",{attrs:{title:"需要VIP会员权限",type:"warning",closable:!1}},[t("template",{slot:"title"},[e._v(" 高级增强和面部修复功能需要VIP会员权限 "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.openVipOptions}},[e._v("立即开通")])],1)],2)],1)]),t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("放大算法")]),t("div",{staticClass:"setting-item"},[t("label",[e._v("Upscaler 1")]),t("el-select",{staticClass:"full-width",attrs:{placeholder:"选择主要放大算法"},model:{value:e.upscaler1,callback:function(t){e.upscaler1=t},expression:"upscaler1"}},e._l(e.upscalerOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"setting-item"},[t("label",[e._v("Upscaler 2")]),t("div",{staticClass:"upscaler-with-weight"},[t("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"选择次要放大算法"},model:{value:e.upscaler2,callback:function(t){e.upscaler2=t},expression:"upscaler2"}},e._l(e.upscalerOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{staticClass:"weight-slider",staticStyle:{width:"30%"}},[t("el-slider",{attrs:{min:0,max:1,step:.1},model:{value:e.upscaler2Weight,callback:function(t){e.upscaler2Weight=t},expression:"upscaler2Weight"}})],1)],1)])]),t("div",{staticClass:"control-section"},[t("div",{staticClass:"token-info"},[t("div",{staticClass:"token-count"},[t("span",[e._v("预计消耗积分: "),t("b",[e._v(e._s(e.totalTokens))])]),t("el-tooltip",{attrs:{content:"积分消耗根据图像尺寸和处理类型计算",placement:"top"}},[t("i",{staticClass:"el-icon-question"})])],1),t("div",{staticClass:"user-tokens"},[t("span",[e._v("可用积分: "),t("b",[e._v(e._s(e.userTokens))])]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.openBuyTokens}},[e._v("购买积分")])],1)]),t("generate-button",{attrs:{"token-cost":e.totalTokens,"token-balance":e.userTokens,"is-generating":e.isProcessing,"generation-progress":e.processingProgress,"can-generate":e.canProcess&&!(!e.isVipUser&&(e.enableEnhancement||e.faceRestore)),"progress-text":e.progressText||"处理中...","show-stop-button":!0,"is-vip-user":e.isVipUser},on:{generate:e.processImage,stop:e.stopProcessing,recharge:e.openBuyTokens,"open-vip":e.openVipOptions}})],1)]),t("div",{staticClass:"right-panel"},[t("div",{staticClass:"preview-panel"},[t("div",{staticClass:"preview-header"},[t("h3",{staticClass:"panel-title"},[e._v("处理结果预览")]),e.processedImages.length>0?t("div",{staticClass:"preview-actions"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download"},on:{click:e.saveAllImages}},[e._v("保存所有")]),t("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.clearResults}},[e._v("清除结果")])],1):e._e()]),t("div",{staticClass:"preview-content"},[e.processedImages.length>0?t("div",{staticClass:"image-grid"},e._l(e.processedImages,(function(s,i){return t("div",{key:i,staticClass:"image-item"},[t("div",{staticClass:"image-container"},[t("img",{staticClass:"generated-image",attrs:{src:s.url,alt:"处理后的图片"}})]),t("div",{staticClass:"image-actions"},[t("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(t){return e.previewImage(s)}}},[e._v("查看")]),t("el-button",{attrs:{type:"text",icon:"el-icon-download"},on:{click:function(t){return e.downloadImage(s)}}},[e._v("下载")]),t("el-button",{attrs:{type:"text",icon:"el-icon-star-off"},on:{click:function(t){return e.favoriteImage(s)}}},[e._v("收藏")])],1)])})),0):t("div",{staticClass:"empty-preview"},[e._m(3)])]),e.isProcessing?t("div",{staticClass:"generation-progress"},[t("el-progress",{attrs:{percentage:e.processingProgress,format:e.progressFormat}}),t("p",[e._v("正在处理图像中，请稍等...")])],1):e._e()])])])])},ie=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-header"},[t("h2",{staticClass:"tab-title"},[e._v("图像后期处理")]),t("p",{staticClass:"tab-description"},[e._v("对图像进行后期增强、优化和处理")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"option-header"},[t("label",[e._v("清晰度增强")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"option-header"},[t("label",[e._v("降噪强度")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"empty-placeholder"},[t("i",{staticClass:"el-icon-picture-outline"}),t("p",[e._v("请上传图片并配置处理参数，然后点击生成按钮")])])}],ae={name:"PostProcessingTab",components:{ImageUploader:X,GenerateButton:M},data(){return{sourceImage:null,originalWidth:512,originalHeight:512,resizeFactor:2,enableEnhancement:!1,enhancementStrength:.5,faceRestore:!1,faceRestoreBlur:4,sharpness:.3,denoiseStrength:.5,upscaler1:"R-ESRGAN 4x+",upscaler2:"None",upscaler2Weight:.5,isProcessing:!1,loadingDialog:!1,processingProgress:0,progressText:"正在处理...",processedImages:[],previewDialog:!1,currentPreviewImage:null,isVipUser:!1,userTokens:50,upscalerOptions:L()}},computed:{canProcess(){return null!==this.sourceImage&&this.userTokens>=this.totalTokens},totalTokens(){let e=5;return this.faceRestore&&(e+=3),this.resizeFactor>1&&(e+=Math.ceil(5*this.resizeFactor)),e}},methods:{handleImageChange(e){e&&(this.originalWidth=512,this.originalHeight=512)},async processImage(e){this.canProcess&&(this.isVipUser||!this.enableEnhancement&&!this.faceRestore)?(this.isProcessing=!0,this.loadingDialog=!0,this.processingProgress=0,this.progressText=e&&"vip"===e.queueType?"VIP优先处理中...":"普通队列处理中...",A((e=>{this.processingProgress=e}),e&&"vip"===e.queueType?2e3:6e3).then((()=>{const e={id:Date.now(),url:`https://picsum.photos/seed/${Math.floor(1e3*Math.random())}/512/512`,originalImage:this.sourceImage,settings:{resizeFactor:this.resizeFactor,enableEnhancement:this.enableEnhancement,enhancementStrength:this.enhancementStrength,faceRestore:this.faceRestore,faceRestoreBlur:this.faceRestoreBlur,sharpness:this.sharpness,denoiseStrength:this.denoiseStrength,upscaler1:this.upscaler1,upscaler2:this.upscaler2,upscaler2Weight:this.upscaler2Weight},timestamp:(new Date).toISOString()};this.processedImages.unshift(e),this.isProcessing=!1,this.loadingDialog=!1,this.userTokens-=this.totalTokens,this.$message.success("图像处理完成")})).catch((e=>{this.$message.error("处理失败："+e.message),this.isProcessing=!1,this.loadingDialog=!1}))):this.isVipUser||!this.enableEnhancement&&!this.faceRestore||this.openVipOptions()},progressFormat(e){return e+"%"},previewImage(e){this.currentPreviewImage=e,this.$message.info("图像预览功能开发中")},downloadImage(e){this.$message.success(`图像${e.id}已下载`)},favoriteImage(e){this.$message.success(`图像${e.id}已添加到收藏`)},saveAllImages(){this.$message.success("所有图像已保存")},clearResults(){this.processedImages=[]},openVipOptions(){this.$message.info("开通VIP会员功能开发中")},openBuyTokens(){this.$message.info("购买积分功能开发中")},stopProcessing(){this.isProcessing=!1,this.loadingDialog=!1,this.processingProgress=0,this.progressText="处理已停止"}}},ne=ae,le=(0,d.A)(ne,se,ie,!1,null,"cd62fec8",null),oe=le.exports,re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"upscale-tab"},[e._m(0),t("div",{staticClass:"main-container"},[t("div",{staticClass:"left-panel"},[t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("图片上传")]),t("image-uploader",{on:{change:e.handleImageChange},model:{value:e.sourceImage,callback:function(t){e.sourceImage=t},expression:"sourceImage"}})],1),t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("尺寸设置")]),t("div",{staticClass:"size-inputs"},[t("div",{staticClass:"input-group"},[t("label",[e._v("宽度 Width")]),t("el-input",{attrs:{type:"number",min:64,max:4096,step:64},model:{value:e.width,callback:function(t){e.width=e._n(t)},expression:"width"}})],1),t("div",{staticClass:"input-group"},[t("label",[e._v("高度 Height")]),t("el-input",{attrs:{type:"number",min:64,max:4096,step:64},model:{value:e.height,callback:function(t){e.height=e._n(t)},expression:"height"}})],1)]),e.sourceImage?t("div",{staticClass:"size-info"},[t("span",[e._v("从 "+e._s(e.originalWidth)+"*"+e._s(e.originalHeight)+" 缩放到 "+e._s(e.width)+"*"+e._s(e.height))])]):e._e()]),t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("Upscaler设置")]),t("div",{staticClass:"setting-item"},[t("label",[e._v("Upscaler1")]),t("el-select",{staticClass:"full-width",model:{value:e.upscaler1,callback:function(t){e.upscaler1=t},expression:"upscaler1"}},e._l(e.upscalerOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"setting-item"},[t("label",[e._v("放大方法")]),t("el-select",{staticClass:"full-width",attrs:{placeholder:"选择放大方法"},model:{value:e.upscaleMethod,callback:function(t){e.upscaleMethod=t},expression:"upscaleMethod"}},[t("el-option",{attrs:{label:"R-ESRGAN 4x+",value:"R-ESRGAN_4x"}}),t("el-option",{attrs:{label:"Lanczos",value:"Lanczos"}})],1)],1),t("div",{staticClass:"setting-item"},[t("label",[e._v("放大系数")]),t("el-input-number",{staticClass:"full-width",attrs:{min:1,max:8,step:.5},model:{value:e.upscaleFactor,callback:function(t){e.upscaleFactor=t},expression:"upscaleFactor"}})],1)]),t("div",{staticClass:"control-section"},[t("h3",{staticClass:"section-title"},[e._v("面部修复")]),t("div",{staticClass:"setting-item"},[t("label",[e._v("GFPGAN强度")]),t("div",{staticClass:"slider-with-value"},[t("el-slider",{attrs:{min:0,max:1,step:.01},model:{value:e.gfpganStrength,callback:function(t){e.gfpganStrength=t},expression:"gfpganStrength"}}),t("span",{staticClass:"value-display"},[e._v(e._s(e.gfpganStrength.toFixed(2)))])],1)]),t("div",{staticClass:"setting-item"},[t("label",[e._v("CodeFormer强度")]),t("div",{staticClass:"slider-with-value"},[t("el-slider",{attrs:{min:0,max:1,step:.01},model:{value:e.codeformerStrength,callback:function(t){e.codeformerStrength=t},expression:"codeformerStrength"}}),t("span",{staticClass:"value-display"},[e._v(e._s(e.codeformerStrength.toFixed(2)))])],1)]),t("div",{staticClass:"checkbox-option"},[t("el-checkbox",{model:{value:e.cropToFit,callback:function(t){e.cropToFit=t},expression:"cropToFit"}},[e._v("裁剪以适应")])],1)]),t("div",{staticClass:"control-section"},[t("generate-button",{attrs:{"token-cost":e.creditCount,"token-balance":e.userTokens||50,"is-generating":e.isProcessing,"generation-progress":e.processingProgress,"can-generate":e.canProcess,"progress-text":e.progressText||"处理中...","show-stop-button":!0,"is-vip-user":e.isVipUser},on:{generate:e.processImage,stop:e.stopProcessing,recharge:e.openBuyTokens,"open-vip":e.openVipDialog}})],1)]),t("div",{staticClass:"right-panel"},[t("div",{staticClass:"preview-panel"},[t("div",{staticClass:"preview-header"},[t("h3",{staticClass:"panel-title"},[e._v("放大结果预览")]),e.processedImages.length>0?t("div",{staticClass:"preview-actions"},[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download"},on:{click:e.saveAllImages}},[e._v("保存所有")]),t("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.clearResults}},[e._v("清除结果")])],1):e._e()]),t("div",{staticClass:"preview-content"},[e.processedImages.length>0?t("div",{staticClass:"image-grid"},e._l(e.processedImages,(function(s,i){return t("div",{key:i,staticClass:"image-item"},[t("div",{staticClass:"image-container"},[t("img",{staticClass:"generated-image",attrs:{src:s.url||`https://picsum.photos/seed/${Math.floor(1e3*Math.random())}/512/512`,alt:"放大后的图片"}})]),t("div",{staticClass:"image-actions"},[t("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(t){return e.previewImage(s)}}},[e._v("查看")]),t("el-button",{attrs:{type:"text",icon:"el-icon-download"},on:{click:function(t){return e.downloadImage(s)}}},[e._v("下载")]),t("el-button",{attrs:{type:"text",icon:"el-icon-star-off"},on:{click:function(t){return e.favoriteImage(s)}}},[e._v("收藏")])],1)])})),0):t("div",{staticClass:"empty-preview"},[e._m(1)])]),e.isProcessing?t("div",{staticClass:"generation-progress"},[t("el-progress",{attrs:{percentage:e.processingProgress,format:e.progressFormat}}),t("p",[e._v("正在处理图像中，请稍等...")])],1):e._e()])])])])},ce=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-header"},[t("h2",{staticClass:"tab-title"},[e._v("超清放大 (Tiled diffusion)")]),t("p",{staticClass:"tab-description"},[e._v("使用Tiled diffusion技术对图像进行超清分辨率处理")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"empty-placeholder"},[t("i",{staticClass:"el-icon-picture-outline"}),t("p",[e._v("请上传图片并配置放大参数，然后点击生成按钮")])])}],pe={name:"UpscaleTab",components:{ImageUploader:X,GenerateButton:M},data(){return{sourceImage:null,originalWidth:512,originalHeight:512,width:1024,height:1024,upscaler1:"Lanczos",upscaleMethod:"R-ESRGAN_4x",upscaleFactor:2,gfpganStrength:0,codeformerStrength:0,cropToFit:!1,isProcessing:!1,loadingDialog:!1,processingProgress:0,progressText:"处理中...",processedImages:[],upscalerOptions:[{value:"Lanczos",label:"Lanczos"},{value:"R-ESRGAN 4x+",label:"R-ESRGAN 4x+"},{value:"LDSR",label:"LDSR"},{value:"SwinIR",label:"SwinIR"}],isVipUser:!1,userTokens:50}},computed:{canProcess(){return null!==this.sourceImage},creditCount(){const e=5,t=this.width*this.height/1048576,s=Math.ceil(10*t);return e+s}},methods:{handleImageChange(e){e&&(this.originalWidth=512,this.originalHeight=512,this.width=2*this.originalWidth,this.height=2*this.originalHeight)},async processImage(e){this.canProcess&&(this.isProcessing=!0,this.loadingDialog=!0,this.processingProgress=0,this.progressText=e&&"vip"===e.queueType?"VIP优先处理中...":"普通队列处理中...",A((e=>{this.processingProgress=e}),e&&"vip"===e.queueType?3e3:8e3).then((()=>{const e={id:Date.now(),url:`https://picsum.photos/seed/${Math.floor(1e3*Math.random())}/${this.width}/${this.height}`,sourceImage:this.sourceImage,settings:{width:this.width,height:this.height,upscaler1:this.upscaler1,upscaleMethod:this.upscaleMethod,upscaleFactor:this.upscaleFactor,gfpganStrength:this.gfpganStrength,codeformerStrength:this.codeformerStrength,cropToFit:this.cropToFit},timestamp:(new Date).toISOString()};this.processedImages.unshift(e),this.isProcessing=!1,this.loadingDialog=!1,this.userTokens-=this.creditCount,this.$message.success("图像超清放大完成")})).catch((e=>{this.$message.error("处理失败："+e.message),this.isProcessing=!1,this.loadingDialog=!1})))},stopProcessing(){this.isProcessing=!1,this.loadingDialog=!1,this.$message.info("处理已停止")},previewImage(){this.$message.info("查看图片预览")},downloadImage(){this.$message.success("图片已下载")},favoriteImage(){this.$message.success("已添加到收藏")},saveAllImages(){this.$message.success(`已下载 ${this.processedImages.length} 张图片`)},clearResults(){this.processedImages=[],this.$message.info("已清除所有结果")},openBuyTokens(){this.$message.info("购买积分功能开发中")},openVipDialog(){this.$message.info("VIP会员功能开发中")},progressFormat(e){return`${e}%`}}},ue=pe,de=(0,d.A)(ue,re,ce,!1,null,"51a55882",null),ge=de.exports,he=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gallery-tab"},[e._m(0),t("div",{staticClass:"filter-section"},[t("div",{staticClass:"search-box"},[t("el-input",{attrs:{placeholder:"搜索画作名称或标签","prefix-icon":"el-icon-search",clearable:""},on:{clear:e.resetSearch},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),t("div",{staticClass:"filter-options"},[t("el-select",{attrs:{placeholder:"生成模型",clearable:""},on:{change:e.applyFilters},model:{value:e.modelFilter,callback:function(t){e.modelFilter=t},expression:"modelFilter"}},e._l(e.modelOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-select",{attrs:{placeholder:"创建时间",clearable:""},on:{change:e.applyFilters},model:{value:e.timeFilter,callback:function(t){e.timeFilter=t},expression:"timeFilter"}},e._l(e.timeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-select",{attrs:{placeholder:"排序方式"},on:{change:e.applyFilters},model:{value:e.sortOption,callback:function(t){e.sortOption=t},expression:"sortOption"}},e._l(e.sortOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),e.filteredPaintings.length>0?t("div",{staticClass:"paintings-grid"},e._l(e.filteredPaintings,(function(s){return t("div",{key:s.id,staticClass:"painting-card",on:{click:function(t){return e.viewPaintingDetail(s.id)}}},[t("div",{staticClass:"painting-image",style:{backgroundImage:`url(${s.imageUrl})`}},[t("div",{staticClass:"painting-actions"},[t("el-button",{attrs:{type:"text",icon:"el-icon-download"},on:{click:function(t){return t.stopPropagation(),e.downloadImage(s)}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return t.stopPropagation(),e.editPrompt(s)}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return t.stopPropagation(),e.confirmDelete(s)}}})],1)]),t("div",{staticClass:"painting-info"},[t("h3",{staticClass:"painting-title"},[e._v(e._s(s.title||"未命名作品"))]),t("div",{staticClass:"painting-meta"},[t("span",{staticClass:"painting-date"},[e._v(e._s(e.formatDate(s.created)))]),t("span",{staticClass:"painting-model"},[e._v(e._s(s.model))])]),t("div",{staticClass:"painting-prompt"},[t("el-tooltip",{attrs:{content:s.prompt,placement:"top",disabled:!s.prompt}},[t("p",{staticClass:"truncate"},[e._v(e._s(s.prompt||"无提示词"))])])],1),s.tags&&s.tags.length?t("div",{staticClass:"painting-tags"},e._l(s.tags,(function(s){return t("el-tag",{key:s,attrs:{size:"mini"},on:{click:function(t){return t.stopPropagation(),e.filterByTag(s)}}},[e._v(e._s(s))])})),1):e._e()])])})),0):e._e(),e.selectedPaintings.length>0?t("div",{staticClass:"batch-actions"},[t("span",{staticClass:"selected-count"},[e._v("已选择 "+e._s(e.selectedPaintings.length)+" 项")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.batchDownload}},[e._v("批量下载")]),t("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.batchDelete}},[e._v("批量删除")]),t("el-button",{attrs:{size:"small"},on:{click:e.clearSelection}},[e._v("取消选择")])],1):e._e(),0===e.filteredPaintings.length?t("div",{staticClass:"no-results"},[t("i",{staticClass:"el-icon-picture-outline"}),t("h3",[e._v("暂无画作")]),t("p",[e._v("您还没有创建任何AI画作，或没有符合筛选条件的作品")]),t("el-button",{attrs:{type:"primary"},on:{click:e.goToCreate}},[e._v("开始创作")]),e.hasFilters?t("el-button",{attrs:{plain:""},on:{click:e.resetFilters}},[e._v("重置筛选")]):e._e()],1):e._e(),e.totalPaintings>e.pageSize?t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPaintings,"current-page":e.currentPage,"page-size":e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handlePageChange}})],1):e._e(),t("el-dialog",{attrs:{title:"编辑画作信息",visible:e.editDialog.visible,width:"50%"},on:{"update:visible":function(t){return e.$set(e.editDialog,"visible",t)}}},[e.editDialog.painting?t("div",{staticClass:"edit-dialog-content"},[t("el-form",{attrs:{"label-position":"top"}},[t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{attrs:{placeholder:"为您的作品命名"},model:{value:e.editDialog.painting.title,callback:function(t){e.$set(e.editDialog.painting,"title",t)},expression:"editDialog.painting.title"}})],1),t("el-form-item",{attrs:{label:"提示词"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"描述此画作的提示词"},model:{value:e.editDialog.painting.prompt,callback:function(t){e.$set(e.editDialog.painting,"prompt",t)},expression:"editDialog.painting.prompt"}})],1),t("el-form-item",{attrs:{label:"标签"}},[e._l(e.editDialog.tags,(function(s){return t("el-tag",{key:s,attrs:{closable:"","disable-transitions":!1},on:{close:function(t){return e.handleTagClose(s)}}},[e._v(" "+e._s(s)+" ")])})),e.editDialog.inputVisible?t("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.editDialog.inputValue,callback:function(t){e.$set(e.editDialog,"inputValue",t)},expression:"editDialog.inputValue"}}):t("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 添加标签")])],2)],1)],1):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialog.visible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("保存")])],1)]),t("el-dialog",{attrs:{title:"删除确认",visible:e.deleteDialog.visible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.deleteDialog,"visible",t)}}},[t("p",[e._v("确定要删除"+e._s(e.deleteDialog.isBatch?"选中的 "+e.selectedPaintings.length+" 个":"这个")+"作品吗？此操作不可撤销。")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.deleteDialog.visible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"danger"},on:{click:e.confirmDeleteAction}},[e._v("删除")])],1)])],1)},me=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-header"},[t("h2",{staticClass:"tab-title"},[e._v("我的AI绘画作品")]),t("p",{staticClass:"tab-description"},[e._v("管理和展示您创建的所有AI生成画作")])])}],ve=(s(2489),s(3579),{name:"GalleryTab",data(){return{searchQuery:"",modelFilter:"",timeFilter:"",sortOption:"newest",currentPage:1,pageSize:12,modelOptions:[{value:"sdxl",label:"Stable Diffusion XL"},{value:"sd1.5",label:"Stable Diffusion 1.5"},{value:"dall-e",label:"DALL-E 3"},{value:"midjourney",label:"Midjourney"}],timeOptions:[{value:"today",label:"今天"},{value:"week",label:"本周"},{value:"month",label:"本月"},{value:"year",label:"今年"}],sortOptions:[{value:"newest",label:"最新创建"},{value:"oldest",label:"最早创建"},{value:"name_asc",label:"名称 A-Z"},{value:"name_desc",label:"名称 Z-A"}],editDialog:{visible:!1,painting:null,tags:[],inputVisible:!1,inputValue:""},deleteDialog:{visible:!1,painting:null,isBatch:!1},selectedPaintings:[],paintings:Array.from({length:24},((e,t)=>({id:t+1,title:t%3===0?`幻想风景 ${t+1}`:t%3===1?`角色设计 ${t+1}`:"",prompt:`美丽的${t%2===0?"山川":"海洋"}风景, 高清细节, 震撼壮丽, 8k分辨率`,model:t%4===0?"Stable Diffusion XL":t%4===1?"Stable Diffusion 1.5":t%4===2?"DALL-E 3":"Midjourney",created:new Date(Date.now()-30*Math.random()*24*60*60*1e3),width:1024,height:1024,tags:this.getRandomTags(),imageUrl:`https://picsum.photos/seed/${t+100}/300/300`,sampler:"Euler a",steps:30,cfg:7.5,seed:Math.floor(1e9*Math.random())})))}},computed:{filteredPaintings(){let e=[...this.paintings];if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.title&&e.title.toLowerCase().includes(t)||e.prompt&&e.prompt.toLowerCase().includes(t)||e.tags&&e.tags.some((e=>e.toLowerCase().includes(t)))))}if(this.modelFilter){const t=this.modelFilter.toLowerCase();e=e.filter((e=>e.model.toLowerCase().includes(t)))}if(this.timeFilter){const t=new Date;let s=new Date;switch(this.timeFilter){case"today":s.setHours(0,0,0,0);break;case"week":s.setDate(t.getDate()-7);break;case"month":s.setMonth(t.getMonth()-1);break;case"year":s.setFullYear(t.getFullYear()-1);break}e=e.filter((e=>new Date(e.created)>=s))}switch(this.sortOption){case"newest":e.sort(((e,t)=>new Date(t.created)-new Date(e.created)));break;case"oldest":e.sort(((e,t)=>new Date(e.created)-new Date(t.created)));break;case"name_asc":e.sort(((e,t)=>(e.title||"").localeCompare(t.title||"")));break;case"name_desc":e.sort(((e,t)=>(t.title||"").localeCompare(e.title||"")));break}const t=(this.currentPage-1)*this.pageSize;return e.slice(t,t+this.pageSize)},totalPaintings(){return this.paintings.length},hasFilters(){return this.searchQuery||this.modelFilter||this.timeFilter}},methods:{formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`},getRandomTags(){const e=["风景","人物","抽象","城市","自然","动物","建筑","静物","梦幻","现代","复古","科幻"],t=Math.floor(3*Math.random()),s=[...e].sort((()=>.5-Math.random()));return s.slice(0,t)},applyFilters(){this.currentPage=1},resetSearch(){this.searchQuery="",this.applyFilters()},resetFilters(){this.searchQuery="",this.modelFilter="",this.timeFilter="",this.sortOption="newest",this.currentPage=1},handlePageChange(e){this.currentPage=e,window.scrollTo({top:0,behavior:"smooth"})},filterByTag(e){this.searchQuery=e,this.applyFilters()},viewPaintingDetail(e){this.$message.info(`查看画作详情: ${e}`)},downloadImage(e){this.$message.success(`下载画作: ${e.id}`)},editPrompt(e){this.editDialog.painting=JSON.parse(JSON.stringify(e)),this.editDialog.tags=e.tags?[...e.tags]:[],this.editDialog.visible=!0},saveEdit(){if(!this.editDialog.painting)return;const e=this.paintings.findIndex((e=>e.id===this.editDialog.painting.id));-1!==e&&(this.editDialog.painting.tags=[...this.editDialog.tags],this.paintings[e]={...this.editDialog.painting},this.$message.success("画作信息已更新")),this.editDialog.visible=!1},handleTagClose(e){this.editDialog.tags.splice(this.editDialog.tags.indexOf(e),1)},showInput(){this.editDialog.inputVisible=!0,this.$nextTick((()=>{this.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm(){const e=this.editDialog.inputValue;e&&!this.editDialog.tags.includes(e)&&this.editDialog.tags.push(e),this.editDialog.inputVisible=!1,this.editDialog.inputValue=""},confirmDelete(e){this.deleteDialog.painting=e,this.deleteDialog.isBatch=!1,this.deleteDialog.visible=!0},batchDelete(){0!==this.selectedPaintings.length&&(this.deleteDialog.isBatch=!0,this.deleteDialog.visible=!0)},confirmDeleteAction(){if(this.deleteDialog.isBatch){const e=this.selectedPaintings.map((e=>e.id));this.paintings=this.paintings.filter((t=>!e.includes(t.id))),this.selectedPaintings=[],this.$message.success(`已删除 ${e.length} 个画作`)}else this.deleteDialog.painting&&(this.paintings=this.paintings.filter((e=>e.id!==this.deleteDialog.painting.id)),this.$message.success("画作已删除"));this.deleteDialog.visible=!1},toggleSelection(e){const t=this.selectedPaintings.findIndex((t=>t.id===e.id));-1!==t?this.selectedPaintings.splice(t,1):this.selectedPaintings.push(e)},clearSelection(){this.selectedPaintings=[]},batchDownload(){0!==this.selectedPaintings.length&&this.$message.success(`开始下载 ${this.selectedPaintings.length} 个画作`)},goToCreate(){this.$emit("changeTab","text2img")}}}),be=ve,fe=(0,d.A)(be,he,me,!1,null,"244a1776",null),Ce=fe.exports,_e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"inpaint-tab"},[e._m(0),t("div",{staticClass:"tab-content"},[t("div",{staticClass:"left-section"},[t("div",{staticClass:"upload-section"},[t("h3",[e._v("上传图像")]),t("image-uploader",{on:{change:e.handleImageChange},model:{value:e.sourceImage,callback:function(t){e.sourceImage=t},expression:"sourceImage"}}),e.sourceImage?e._e():t("div",{staticClass:"image-tips"},[t("p",[e._v("上传需要编辑的图像")]),t("p",[e._v("支持PNG、JPG等格式")])])],1),e.sourceImage?t("div",{staticClass:"tools-section"},[t("h3",[e._v("编辑工具")]),t("div",{staticClass:"tool-buttons"},[t("el-button-group",[t("el-button",{attrs:{type:"brush"===e.currentTool?"primary":"default",size:"small"},on:{click:function(t){return e.setTool("brush")}}},[t("i",{staticClass:"el-icon-brush"}),e._v(" 画笔 ")]),t("el-button",{attrs:{type:"eraser"===e.currentTool?"primary":"default",size:"small"},on:{click:function(t){return e.setTool("eraser")}}},[t("i",{staticClass:"el-icon-delete"}),e._v(" 橡皮擦 ")]),t("el-button",{attrs:{type:"fill"===e.currentTool?"primary":"default",size:"small"},on:{click:function(t){return e.setTool("fill")}}},[t("i",{staticClass:"el-icon-magic-stick"}),e._v(" 填充 ")])],1)],1),t("div",{staticClass:"brush-settings"},[t("div",{staticClass:"setting-item"},[t("label",[e._v("画笔大小")]),t("div",{staticClass:"slider-with-value"},[t("el-slider",{attrs:{min:1,max:50,step:1},model:{value:e.brushSize,callback:function(t){e.brushSize=t},expression:"brushSize"}}),t("span",{staticClass:"value-display"},[e._v(e._s(e.brushSize)+"px")])],1)]),t("div",{staticClass:"setting-item"},[t("label",[e._v("模式")]),t("el-select",{attrs:{placeholder:"选择模式"},model:{value:e.inpaintMode,callback:function(t){e.inpaintMode=t},expression:"inpaintMode"}},[t("el-option",{attrs:{label:"移除",value:"remove"}}),t("el-option",{attrs:{label:"替换",value:"replace"}}),t("el-option",{attrs:{label:"区域重绘",value:"redraw"}})],1)],1)])]):e._e()]),t("div",{staticClass:"right-section"},[t("div",{staticClass:"inpaint-settings"},[t("h3",[e._v("Inpaint设置")]),"replace"===e.inpaintMode||"redraw"===e.inpaintMode?[t("div",{staticClass:"prompt-section"},[t("h4",[e._v("提示词")]),t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"描述想要替换的内容...",maxlength:500,"show-word-limit":""},model:{value:e.prompt,callback:function(t){e.prompt=t},expression:"prompt"}}),t("h4",[e._v("负面提示词")]),t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"描述不希望出现的内容...",maxlength:200,"show-word-limit":""},model:{value:e.negativePrompt,callback:function(t){e.negativePrompt=t},expression:"negativePrompt"}})],1)]:e._e(),t("div",{staticClass:"setting-item"},[t("label",[e._v("采样方法")]),t("el-select",{attrs:{placeholder:"选择采样方法"},model:{value:e.sampler,callback:function(t){e.sampler=t},expression:"sampler"}},[t("el-option",{attrs:{label:"Euler a",value:"euler_a"}}),t("el-option",{attrs:{label:"DPM++ 2M Karras",value:"dpm_2m_karras"}}),t("el-option",{attrs:{label:"DPM++ SDE Karras",value:"dpm_sde_karras"}})],1)],1),t("div",{staticClass:"setting-item"},[t("label",[e._v("去噪强度")]),t("div",{staticClass:"slider-with-value"},[t("el-slider",{attrs:{min:0,max:1,step:.01},model:{value:e.denoiseStrength,callback:function(t){e.denoiseStrength=t},expression:"denoiseStrength"}}),t("span",{staticClass:"value-display"},[e._v(e._s(e.denoiseStrength.toFixed(2)))])],1)]),t("div",{staticClass:"setting-item"},[t("label",[e._v("迭代步数")]),t("el-input-number",{attrs:{min:1,max:150,step:1},model:{value:e.steps,callback:function(t){e.steps=t},expression:"steps"}})],1),t("div",{staticClass:"checkbox-option"},[t("el-checkbox",{model:{value:e.useInpaintModel,callback:function(t){e.useInpaintModel=t},expression:"useInpaintModel"}},[e._v("使用专用修复模型")]),t("el-tooltip",{attrs:{content:"使用专门为修复任务训练的模型",placement:"right"}},[t("i",{staticClass:"el-icon-question"})])],1)],2),t("div",{staticClass:"generate-button-wrapper"},[t("generate-button",{attrs:{loading:e.isProcessing,disabled:!e.canProcess,"credit-count":e.creditCount,"show-progress":!0,"progress-value":e.processingProgress},on:{generate:e.processImage,"open-vip":e.openVipDialog}})],1)])]),e.hasResults?t("div",{staticClass:"results-section"},[t("div",{staticClass:"results-header"},[t("h3",[e._v("处理结果")]),t("div",{staticClass:"results-actions"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveImage}},[e._v("保存图像")]),t("el-button",{attrs:{size:"small"},on:{click:e.clearResults}},[e._v("清除结果")])],1)]),t("div",{staticClass:"comparison-view"},[t("div",{staticClass:"comparison-item"},[t("div",{staticClass:"comparison-title"},[e._v("原始图像")]),t("div",{staticClass:"image-container"},[e.sourceImage?t("div",{staticClass:"image-placeholder source-preview"},[e._v("原图预览")]):t("div",{staticClass:"image-placeholder"},[e._v("无图像")])])]),e._m(1),t("div",{staticClass:"comparison-item"},[t("div",{staticClass:"comparison-title"},[e._v("修复后图像")]),t("div",{staticClass:"image-container"},[e.inpaintedImage?t("div",{staticClass:"image-placeholder inpainted-preview",style:{backgroundColor:e.resultColor}},[e._v("修复后预览")]):t("div",{staticClass:"image-placeholder"},[e._v("无图像")])])])]),t("div",{staticClass:"result-actions"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downloadImage}},[e._v("下载图像")]),t("el-button",{attrs:{type:"success",icon:"el-icon-star-off"},on:{click:e.addToFavorites}},[e._v("添加到收藏")]),t("el-button",{attrs:{type:"info",icon:"el-icon-edit"},on:{click:e.continueEditing}},[e._v("继续编辑")])],1)]):e._e(),t("el-dialog",{attrs:{title:"正在处理图像",visible:e.loadingDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"30%"},on:{"update:visible":function(t){e.loadingDialog=t}}},[t("div",{staticClass:"loading-dialog-content"},[t("el-progress",{attrs:{percentage:e.processingProgress,format:e.progressFormat}}),t("p",[e._v("正在为您修复图像，请稍等...")])],1)])],1)},we=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-header"},[t("h2",{staticClass:"tab-title"},[e._v("Inpaint Anything")]),t("p",{staticClass:"tab-description"},[e._v("智能移除或替换图像中的物体，通过AI技术进行无缝修复")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"comparison-arrow"},[t("i",{staticClass:"el-icon-arrow-right"})])}],ke={name:"InpaintTab",components:{ImageUploader:X,GenerateButton:M},data(){return{sourceImage:null,inpaintedImage:null,resultColor:"#5f8bff",currentTool:"brush",brushSize:20,inpaintMode:"remove",prompt:"",negativePrompt:"",sampler:"euler_a",denoiseStrength:.75,steps:20,useInpaintModel:!0,isProcessing:!1,loadingDialog:!1,processingProgress:0,hasResults:!1}},computed:{canProcess(){return null!==this.sourceImage},creditCount(){let e=5;return"remove"!==this.inpaintMode&&(e+=2),this.useInpaintModel&&(e+=1),this.steps>30&&(e+=2),e}},methods:{handleImageChange(e){e&&(this.inpaintedImage=null,this.hasResults=!1)},setTool(e){this.currentTool=e},progressFormat(e){return e+"%"},async processImage(){if(this.canProcess){this.isProcessing=!0,this.loadingDialog=!0,this.processingProgress=0;try{await A((e=>{this.processingProgress=e}),4e3),this.inpaintedImage=!0,this.hasResults=!0,this.resultColor=V(60,70),this.$message.success("图像修复完成")}catch(e){this.$message.error("图像处理失败"),console.error("处理错误:",e)}finally{this.isProcessing=!1,this.loadingDialog=!1}}},saveImage(){this.$message.success("图像已保存到您的作品集")},clearResults(){this.inpaintedImage=null,this.hasResults=!1},downloadImage(){this.$message.success("图像已下载")},addToFavorites(){this.$message.success("已添加到收藏")},continueEditing(){this.$message.info("进入图像编辑模式")},openVipDialog(){this.$message.info("开通VIP会员功能开发中")}}},ye=ke,xe=(0,d.A)(ye,_e,we,!1,null,"6dfe3b4c",null),Se=xe.exports,Ie=function(){var e=this,t=e._self._c;return t("div",{staticClass:"image-info-tab"},[e._m(0),t("div",{staticClass:"tab-content"},[t("div",{staticClass:"left-section"},[t("div",{staticClass:"upload-section"},[t("h3",[e._v("上传PNG图像")]),t("image-uploader",{attrs:{accept:".png"},on:{change:e.handleImageChange},model:{value:e.sourceImage,callback:function(t){e.sourceImage=t},expression:"sourceImage"}}),e.sourceImage?e._e():t("div",{staticClass:"image-tips"},[t("p",[e._v("上传需要查看信息的PNG图像")]),t("p",[e._v("仅支持含有元数据的PNG格式图像")]),t("p",[e._v("通常由AI绘画工具生成的图像包含生成参数")])])],1),e.sourceImage?t("div",{staticClass:"image-preview"},[t("h3",[e._v("图像预览")]),e._m(1),t("div",{staticClass:"image-basic-info"},[t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("图像尺寸:")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.imageInfo.width||512)+" x "+e._s(e.imageInfo.height||512))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("文件大小:")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.imageInfo.fileSize||"1.2 MB"))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"info-label"},[e._v("创建日期:")]),t("span",{staticClass:"info-value"},[e._v(e._s(e.imageInfo.createDate||"2023-11-24 15:30:45"))])])])]):e._e()]),t("div",{staticClass:"right-section"},[t("div",{staticClass:"metadata-section"},[t("div",{staticClass:"section-header"},[t("h3",[e._v("生成参数")]),e.hasMetadata?t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-copy-document"},on:{click:e.copyMetadata}},[e._v(" 复制全部 ")]):e._e()],1),e.hasMetadata?t("div",{staticClass:"metadata-content"},[t("div",{staticClass:"metadata-item"},[e._m(2),t("div",{staticClass:"item-content"},[t("div",{staticClass:"prompt-text"},[e._v(e._s(e.metadataInfo.prompt))])])]),t("div",{staticClass:"metadata-item"},[e._m(3),t("div",{staticClass:"item-content"},[t("div",{staticClass:"prompt-text"},[e._v(e._s(e.metadataInfo.negativePrompt))])])]),t("div",{staticClass:"parameters-grid"},[t("div",{staticClass:"parameter-item"},[t("span",{staticClass:"parameter-label"},[e._v("模型:")]),t("span",{staticClass:"parameter-value"},[e._v(e._s(e.metadataInfo.model))])]),t("div",{staticClass:"parameter-item"},[t("span",{staticClass:"parameter-label"},[e._v("采样器:")]),t("span",{staticClass:"parameter-value"},[e._v(e._s(e.metadataInfo.sampler))])]),t("div",{staticClass:"parameter-item"},[t("span",{staticClass:"parameter-label"},[e._v("采样步数:")]),t("span",{staticClass:"parameter-value"},[e._v(e._s(e.metadataInfo.steps))])]),t("div",{staticClass:"parameter-item"},[t("span",{staticClass:"parameter-label"},[e._v("CFG Scale:")]),t("span",{staticClass:"parameter-value"},[e._v(e._s(e.metadataInfo.cfgScale))])]),t("div",{staticClass:"parameter-item"},[t("span",{staticClass:"parameter-label"},[e._v("种子:")]),t("span",{staticClass:"parameter-value"},[e._v(e._s(e.metadataInfo.seed))])]),t("div",{staticClass:"parameter-item"},[t("span",{staticClass:"parameter-label"},[e._v("尺寸:")]),t("span",{staticClass:"parameter-value"},[e._v(e._s(e.metadataInfo.width)+"x"+e._s(e.metadataInfo.height))])]),t("div",{staticClass:"parameter-item"},[t("span",{staticClass:"parameter-label"},[e._v("批次大小:")]),t("span",{staticClass:"parameter-value"},[e._v(e._s(e.metadataInfo.batchSize))])]),t("div",{staticClass:"parameter-item"},[t("span",{staticClass:"parameter-label"},[e._v("模型类型:")]),t("span",{staticClass:"parameter-value"},[e._v(e._s(e.metadataInfo.modelType))])])])]):t("div",{staticClass:"no-data-placeholder"},[t("i",{staticClass:"el-icon-info"}),t("p",[e._v("上传图片后查看元数据信息")])])]),e.hasMetadata?t("div",{staticClass:"action-buttons"},[t("el-button",{attrs:{type:"primary"},on:{click:e.useInTextToImage}},[e._v("在文生图中使用")]),t("el-button",{on:{click:e.downloadInfoAsText}},[e._v("下载信息")])],1):e._e()])])])},Pe=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-header"},[t("h2",{staticClass:"tab-title"},[e._v("PNG图片信息")]),t("p",{staticClass:"tab-description"},[e._v("查看和提取PNG图片中的生成参数和Stable Diffusion元数据")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"preview-container"},[t("div",{staticClass:"preview-placeholder"},[e._v(" 图像预览 ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"item-header"},[t("span",{staticClass:"item-title"},[e._v("提示词 (Prompt)")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"item-header"},[t("span",{staticClass:"item-title"},[e._v("反向提示词 (Negative Prompt)")])])}],Te=(s(4603),s(7566),s(8721),{name:"ImageInfoTab",components:{ImageUploader:X},data(){return{sourceImage:null,imageInfo:{width:null,height:null,fileSize:null,createDate:null},metadataInfo:{prompt:"高质量女孩肖像，长发，蓝眼睛，微笑，阳光下，户外，精致细节，超写实，高质量，8k分辨率",negativePrompt:"低质量，模糊，扭曲，不自然的姿势，糟糕的解剖结构，变形的手，不自然的皮肤，低分辨率",model:"realisticVisionV5_v51VAE",sampler:"DPM++ 2M Karras",steps:30,cfgScale:7,seed:3857502736,width:512,height:768,batchSize:1,modelType:"Stable Diffusion"}}},computed:{hasMetadata(){return null!==this.sourceImage}},methods:{handleImageChange(e){e?this.parseImageMetadata():this.resetData()},parseImageMetadata(){this.imageInfo={width:512,height:768,fileSize:"1.2 MB",createDate:(new Date).toLocaleString()}},resetData(){this.imageInfo={width:null,height:null,fileSize:null,createDate:null}},copyMetadata(){const e=this.formatMetadataAsText();navigator.clipboard.writeText(e).then((()=>{this.$message.success("元数据已复制到剪贴板")})).catch((()=>{this.$message.error("复制失败")}))},formatMetadataAsText(){const e=this.metadataInfo;return`Prompt: ${e.prompt}\n\nNegative Prompt: ${e.negativePrompt}\n\nModel: ${e.model}\nSampler: ${e.sampler}\nSteps: ${e.steps}\nCFG Scale: ${e.cfgScale}\nSeed: ${e.seed}\nSize: ${e.width}x${e.height}\nBatch Size: ${e.batchSize}\nModel Type: ${e.modelType}`},useInTextToImage(){this.$message.success("参数已应用到文生图"),this.$emit("use-in-text2img",this.metadataInfo)},downloadInfoAsText(){const e=this.formatMetadataAsText(),t=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download="image_metadata.txt",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),this.$message.success("元数据已下载")}}}),De=Te,$e=(0,d.A)(De,Ie,Pe,!1,null,"73169fab",null),ze=$e.exports,Me=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tagger-tab"},[e._m(0),t("div",{staticClass:"tab-content"},[t("div",{staticClass:"left-section"},[t("div",{staticClass:"upload-section"},[t("h3",[e._v("上传图像")]),t("image-uploader",{on:{change:e.handleImageChange},model:{value:e.sourceImage,callback:function(t){e.sourceImage=t},expression:"sourceImage"}}),e.sourceImage?e._e():t("div",{staticClass:"image-tips"},[t("p",[e._v("上传需要提取标签的图像")]),t("p",[e._v("支持PNG、JPG等格式")])])],1)]),t("div",{staticClass:"right-section"},[t("div",{staticClass:"tagger-settings"},[t("h3",[e._v("标签提取设置")]),t("div",{staticClass:"setting-item"},[t("label",[e._v("标签模型")]),t("el-select",{attrs:{placeholder:"选择标签模型"},model:{value:e.taggerModel,callback:function(t){e.taggerModel=t},expression:"taggerModel"}},[t("el-option",{attrs:{label:"WD 1.4 Tagger",value:"wd14"}}),t("el-option",{attrs:{label:"DeepDanbooru",value:"deepdanbooru"}}),t("el-option",{attrs:{label:"CLIP",value:"clip"}})],1)],1),t("div",{staticClass:"setting-item"},[t("label",[e._v("标签语言")]),t("el-select",{attrs:{placeholder:"选择标签语言"},model:{value:e.tagLanguage,callback:function(t){e.tagLanguage=t},expression:"tagLanguage"}},[t("el-option",{attrs:{label:"中文",value:"zh"}}),t("el-option",{attrs:{label:"英文",value:"en"}}),t("el-option",{attrs:{label:"日文",value:"jp"}})],1)],1),t("div",{staticClass:"setting-item"},[t("label",[e._v("置信度阈值")]),t("div",{staticClass:"slider-with-value"},[t("el-slider",{attrs:{min:0,max:1,step:.01},model:{value:e.confidenceThreshold,callback:function(t){e.confidenceThreshold=t},expression:"confidenceThreshold"}}),t("span",{staticClass:"value-display"},[e._v(e._s(e.confidenceThreshold.toFixed(2)))])],1)]),t("div",{staticClass:"checkbox-options"},[t("div",{staticClass:"checkbox-option"},[t("el-checkbox",{model:{value:e.includeCharacter,callback:function(t){e.includeCharacter=t},expression:"includeCharacter"}},[e._v("包含角色标签")])],1),t("div",{staticClass:"checkbox-option"},[t("el-checkbox",{model:{value:e.includeGeneral,callback:function(t){e.includeGeneral=t},expression:"includeGeneral"}},[e._v("包含一般标签")])],1),t("div",{staticClass:"checkbox-option"},[t("el-checkbox",{model:{value:e.excludeNSFW,callback:function(t){e.excludeNSFW=t},expression:"excludeNSFW"}},[e._v("排除NSFW标签")])],1),t("div",{staticClass:"checkbox-option"},[t("el-checkbox",{model:{value:e.sortByConfidence,callback:function(t){e.sortByConfidence=t},expression:"sortByConfidence"}},[e._v("按置信度排序")])],1)])]),t("div",{staticClass:"generate-button-wrapper"},[t("el-button",{attrs:{type:"primary",size:"medium",loading:e.isProcessing,disabled:!e.canProcess},on:{click:e.extractTags}},[e._v(" 提取标签 ")])],1)]),e.hasTags?t("div",{staticClass:"results-section"},[t("div",{staticClass:"results-header"},[t("h3",[e._v("提取结果")]),t("div",{staticClass:"results-actions"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.copyAllTags}},[e._v("复制所有")]),t("el-button",{attrs:{size:"small"},on:{click:e.clearResults}},[e._v("清除结果")])],1)]),t("div",{staticClass:"tags-container"},[t("div",{staticClass:"tags-list"},e._l(e.extractedTags,(function(s,i){return t("div",{key:i,staticClass:"tag-item"},[t("span",{staticClass:"tag-name"},[e._v(e._s(s.name))]),t("div",{staticClass:"tag-confidence-bar",style:{width:100*s.confidence+"%"}}),t("span",{staticClass:"tag-confidence"},[e._v(e._s((100*s.confidence).toFixed(1))+"%")])])})),0),t("div",{staticClass:"formatted-prompt"},[t("h4",[e._v("格式化提示词")]),t("el-input",{attrs:{type:"textarea",rows:6,readonly:""},model:{value:e.formattedPrompt,callback:function(t){e.formattedPrompt=t},expression:"formattedPrompt"}}),t("div",{staticClass:"prompt-actions"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.copyPrompt}},[e._v("复制提示词")]),t("el-button",{attrs:{size:"small"},on:{click:e.useInTextToImage}},[e._v("在文生图中使用")])],1)],1)])]):e._e()]),t("el-dialog",{attrs:{title:"正在提取标签",visible:e.loadingDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"30%"},on:{"update:visible":function(t){e.loadingDialog=t}}},[t("div",{staticClass:"loading-dialog-content"},[t("el-progress",{attrs:{percentage:e.processingProgress,format:e.progressFormat}}),t("p",[e._v("正在分析图像并提取标签，请稍等...")])],1)])],1)},Fe=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-header"},[t("h2",{staticClass:"tab-title"},[e._v("WD1.4 标签器")]),t("p",{staticClass:"tab-description"},[e._v("上传图片，自动提取适用于AI绘画的标签和提示词")])])}],Re={name:"TaggerTab",components:{ImageUploader:X},data(){return{sourceImage:null,taggerModel:"wd14",tagLanguage:"zh",confidenceThreshold:.35,includeCharacter:!0,includeGeneral:!0,excludeNSFW:!0,sortByConfidence:!0,isProcessing:!1,loadingDialog:!1,processingProgress:0,extractedTags:[],formattedPrompt:""}},computed:{canProcess(){return null!==this.sourceImage},hasTags(){return this.extractedTags.length>0}},methods:{handleImageChange(e){e&&(this.extractedTags=[],this.formattedPrompt="")},progressFormat(e){return e+"%"},async extractTags(){if(this.canProcess){this.isProcessing=!0,this.loadingDialog=!0,this.processingProgress=0;try{await A((e=>{this.processingProgress=e}),3e3),this.generateMockTags(),this.$message.success("标签提取完成")}catch(e){this.$message.error("标签提取失败"),console.error("处理错误:",e)}finally{this.isProcessing=!1,this.loadingDialog=!1}}},generateMockTags(){const e=[{name:"女孩",confidence:.99,type:"character"},{name:"微笑",confidence:.95,type:"general"},{name:"长发",confidence:.93,type:"general"},{name:"蓝眼睛",confidence:.89,type:"general"},{name:"连衣裙",confidence:.85,type:"general"},{name:"花",confidence:.82,type:"general"},{name:"户外",confidence:.78,type:"general"},{name:"阳光",confidence:.76,type:"general"},{name:"公园",confidence:.68,type:"general"},{name:"白色裙子",confidence:.65,type:"general"},{name:"天空",confidence:.62,type:"general"},{name:"树",confidence:.59,type:"general"},{name:"草地",confidence:.55,type:"general"},{name:"云",confidence:.48,type:"general"},{name:"蝴蝶",confidence:.42,type:"general"},{name:"手持花束",confidence:.39,type:"general"},{name:"春天",confidence:.36,type:"general"}];this.extractedTags=e.filter((e=>!(e.confidence<this.confidenceThreshold)&&(!(!this.includeCharacter&&"character"===e.type)&&!(!this.includeGeneral&&"general"===e.type)))),this.sortByConfidence&&this.extractedTags.sort(((e,t)=>t.confidence-e.confidence)),this.formattedPrompt=this.extractedTags.map((e=>e.name+("en"===this.tagLanguage?" ":"，"))).join("")},copyAllTags(){const e=this.extractedTags.map((e=>e.name)).join("，");navigator.clipboard.writeText(e).then((()=>{this.$message.success("已复制所有标签")})).catch((()=>{this.$message.error("复制失败")}))},copyPrompt(){navigator.clipboard.writeText(this.formattedPrompt).then((()=>{this.$message.success("已复制提示词")})).catch((()=>{this.$message.error("复制失败")}))},useInTextToImage(){this.$message.success("已添加到文生图提示词"),this.$emit("use-in-text2img",this.formattedPrompt)},clearResults(){this.extractedTags=[],this.formattedPrompt=""}}},Ve=Re,Ae=(0,d.A)(Ve,Me,Fe,!1,null,"be81c1f6",null),Ue=Ae.exports,Ge={name:"CreatePaintingView",components:{MainLayout:n.A,TextToImageTab:N,ImageToImageTab:te,PostProcessingTab:oe,UpscaleTab:ge,GalleryTab:Ce,InpaintTab:Se,ImageInfoTab:ze,TaggerTab:Ue},data(){return{activeTab:"text2img",isLoggedIn:!0,isVip:!1,vipExpires:null,userCredits:50,showFeatureTip:!0,creditsDialog:{visible:!1,selectedPackage:null},creditPackages:[{id:1,amount:100,price:10,bonus:0},{id:2,amount:500,price:45,bonus:50},{id:3,amount:1e3,price:80,bonus:200},{id:4,amount:2e3,price:150,bonus:500}]}},computed:{vipExpiresText(){if(!this.vipExpires)return"";const e=new Date(this.vipExpires),t=new Date,s=Math.ceil((e-t)/864e5);return s>0?`剩余${s}天`:"已过期"}},created(){this.checkLoginStatus()},methods:{checkLoginStatus(){this.isLoggedIn||this.$router.push("/login")},handleTabChange(){console.log("当前标签页:",this.activeTab)},changeTab(e){this.activeTab=e},closeFeatureTip(){this.showFeatureTip=!1},openVipOptions(){this.$refs.text2imgTab&&"function"===typeof this.$refs.text2imgTab.openVipOptions&&this.$refs.text2imgTab.openVipOptions()},openBuyCredits(){this.creditsDialog.visible=!0},selectCreditPackage(e){this.creditsDialog.selectedPackage=e},confirmCreditPurchase(){if(!this.creditsDialog.selectedPackage)return;const e=this.creditsDialog.selectedPackage;this.userCredits+=e.amount+(e.bonus||0),this.$message.success(`您已成功购买${e.amount}积分${e.bonus?"，赠送"+e.bonus+"积分":""}！`),this.creditsDialog.visible=!1,this.creditsDialog.selectedPackage=null,this.syncCreditsToComponents()},syncCreditsToComponents(){const e=["text2imgTab","img2imgTab","postprocessingTab"];e.forEach((e=>{this.$refs[e]&&"function"===typeof this.$refs[e].updateUserTokens&&this.$refs[e].updateUserTokens(this.userCredits)}))}}},Le=Ge,Be=(0,d.A)(Le,i,a,!1,null,"65ebaf4b",null),Ee=Be.exports}}]);
//# sourceMappingURL=440.2d6bb844.js.map